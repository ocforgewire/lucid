<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Lucid — Clear Thinking, Clear Prompts</title>
<meta name="description" content="Lucid translates your intent into optimized prompts across ChatGPT, Claude, and Gemini. Stop writing prompts. Start thinking.">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
<style>
/* ============================================
   CSS RESET & VARIABLES
   ============================================ */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

:root {
  --primary: #4F46E5;
  --primary-light: #6366F1;
  --primary-dark: #4338CA;
  --secondary: #06B6D4;
  --secondary-light: #22D3EE;
  --success: #10B981;
  --warning: #F59E0B;
  --error: #EF4444;
  --gradient: linear-gradient(135deg, #4F46E5, #06B6D4);
  --gradient-subtle: linear-gradient(135deg, rgba(79,70,229,0.15), rgba(6,182,212,0.15));
  --radius-sm: 6px;
  --radius-md: 10px;
  --radius-lg: 16px;
  --radius-xl: 24px;
  --shadow-sm: 0 1px 2px rgba(0,0,0,0.1);
  --shadow-md: 0 4px 12px rgba(0,0,0,0.15);
  --shadow-lg: 0 8px 32px rgba(0,0,0,0.2);
  --shadow-xl: 0 16px 48px rgba(0,0,0,0.3);
  --transition: 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  --transition-slow: 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  --font-body: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  --font-mono: 'JetBrains Mono', 'Fira Code', monospace;
}

[data-theme="dark"] {
  --bg-primary: #0F172A;
  --bg-secondary: #1E293B;
  --bg-tertiary: #334155;
  --bg-card: #1E293B;
  --bg-card-hover: #253349;
  --bg-input: #1E293B;
  --border: #334155;
  --border-light: #475569;
  --text-primary: #F8FAFC;
  --text-secondary: #94A3B8;
  --text-tertiary: #64748B;
  --text-inverse: #0F172A;
}

[data-theme="light"] {
  --bg-primary: #FAFAFA;
  --bg-secondary: #F1F5F9;
  --bg-tertiary: #E2E8F0;
  --bg-card: #FFFFFF;
  --bg-card-hover: #F8FAFC;
  --bg-input: #FFFFFF;
  --border: #E2E8F0;
  --border-light: #CBD5E1;
  --text-primary: #0F172A;
  --text-secondary: #475569;
  --text-tertiary: #94A3B8;
  --text-inverse: #F8FAFC;
}

html {
  scroll-behavior: smooth;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

body {
  font-family: var(--font-body);
  background: var(--bg-primary);
  color: var(--text-primary);
  line-height: 1.6;
  overflow-x: hidden;
  min-height: 100vh;
}

a { color: var(--primary-light); text-decoration: none; transition: color var(--transition); }
a:hover { color: var(--secondary); }

button {
  font-family: var(--font-body);
  cursor: pointer;
  border: none;
  outline: none;
  transition: all var(--transition);
}

input, select, textarea {
  font-family: var(--font-body);
  outline: none;
  transition: all var(--transition);
}

img { max-width: 100%; display: block; }

/* ============================================
   UTILITY CLASSES
   ============================================ */
.container { max-width: 1200px; margin: 0 auto; padding: 0 24px; }
.container-sm { max-width: 480px; margin: 0 auto; padding: 0 24px; }
.container-md { max-width: 720px; margin: 0 auto; padding: 0 24px; }

.flex { display: flex; }
.flex-col { flex-direction: column; }
.items-center { align-items: center; }
.justify-center { justify-content: center; }
.justify-between { justify-content: space-between; }
.gap-sm { gap: 8px; }
.gap-md { gap: 16px; }
.gap-lg { gap: 24px; }
.gap-xl { gap: 32px; }

.text-center { text-align: center; }
.text-gradient {
  background: var(--gradient);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.hidden { display: none !important; }

/* ============================================
   BUTTONS
   ============================================ */
.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 12px 24px;
  border-radius: var(--radius-md);
  font-weight: 600;
  font-size: 0.95rem;
  transition: all var(--transition);
  white-space: nowrap;
  position: relative;
  overflow: hidden;
}

.btn-primary {
  background: var(--gradient);
  color: white;
  box-shadow: 0 2px 12px rgba(79,70,229,0.4);
}
.btn-primary:hover {
  transform: translateY(-1px);
  box-shadow: 0 4px 20px rgba(79,70,229,0.5);
}

.btn-secondary {
  background: transparent;
  color: var(--text-primary);
  border: 1.5px solid var(--border-light);
}
.btn-secondary:hover {
  border-color: var(--primary-light);
  background: rgba(79,70,229,0.08);
}

.btn-ghost {
  background: transparent;
  color: var(--text-secondary);
  padding: 8px 16px;
}
.btn-ghost:hover { color: var(--text-primary); background: rgba(255,255,255,0.05); }

.btn-lg { padding: 16px 32px; font-size: 1.05rem; border-radius: var(--radius-lg); }
.btn-sm { padding: 8px 16px; font-size: 0.85rem; }
.btn-icon { padding: 8px; border-radius: var(--radius-sm); }

.btn:disabled { opacity: 0.5; cursor: not-allowed; transform: none !important; }

/* ============================================
   FORM ELEMENTS
   ============================================ */
.form-group { display: flex; flex-direction: column; gap: 6px; }
.form-label {
  font-size: 0.875rem;
  font-weight: 500;
  color: var(--text-secondary);
}
.form-input {
  width: 100%;
  padding: 12px 16px;
  background: var(--bg-input);
  border: 1.5px solid var(--border);
  border-radius: var(--radius-md);
  color: var(--text-primary);
  font-size: 0.95rem;
}
.form-input:focus {
  border-color: var(--primary-light);
  box-shadow: 0 0 0 3px rgba(79,70,229,0.15);
}
.form-input::placeholder { color: var(--text-tertiary); }

.form-select {
  width: 100%;
  padding: 12px 16px;
  background: var(--bg-input);
  border: 1.5px solid var(--border);
  border-radius: var(--radius-md);
  color: var(--text-primary);
  font-size: 0.95rem;
  -webkit-appearance: none;
  appearance: none;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='8' fill='%2394A3B8'%3E%3Cpath d='M1 1l5 5 5-5'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right 16px center;
  cursor: pointer;
}
.form-select:focus {
  border-color: var(--primary-light);
  box-shadow: 0 0 0 3px rgba(79,70,229,0.15);
}

.checkbox-group {
  display: flex;
  align-items: center;
  gap: 10px;
  cursor: pointer;
}
.checkbox-group input[type="checkbox"] {
  width: 18px;
  height: 18px;
  accent-color: var(--primary);
  cursor: pointer;
}

/* ============================================
   TOAST NOTIFICATION
   ============================================ */
.toast-container {
  position: fixed;
  top: 24px;
  right: 24px;
  z-index: 10000;
  display: flex;
  flex-direction: column;
  gap: 8px;
}
.toast {
  padding: 14px 20px;
  border-radius: var(--radius-md);
  background: var(--bg-card);
  border: 1px solid var(--border);
  color: var(--text-primary);
  font-size: 0.9rem;
  box-shadow: var(--shadow-lg);
  animation: toastIn 0.3s ease, toastOut 0.3s ease 2.7s forwards;
  display: flex;
  align-items: center;
  gap: 10px;
  max-width: 380px;
}
.toast.success { border-left: 3px solid var(--success); }
.toast.error { border-left: 3px solid var(--error); }
.toast.info { border-left: 3px solid var(--primary); }

@keyframes toastIn {
  from { opacity: 0; transform: translateX(40px); }
  to { opacity: 1; transform: translateX(0); }
}
@keyframes toastOut {
  from { opacity: 1; transform: translateX(0); }
  to { opacity: 0; transform: translateX(40px); }
}

/* ============================================
   NAVIGATION
   ============================================ */
.nav {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  z-index: 1000;
  padding: 0 24px;
  transition: all var(--transition);
  background: transparent;
}
.nav.scrolled {
  background: rgba(15,23,42,0.85);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border-bottom: 1px solid rgba(51,65,85,0.5);
}
[data-theme="light"] .nav.scrolled {
  background: rgba(250,250,250,0.85);
  border-bottom: 1px solid rgba(226,232,240,0.8);
}

.nav-inner {
  max-width: 1200px;
  margin: 0 auto;
  height: 72px;
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.nav-logo {
  display: flex;
  align-items: center;
  gap: 10px;
  font-size: 1.35rem;
  font-weight: 800;
  color: var(--text-primary);
  letter-spacing: -0.02em;
  cursor: pointer;
}
.nav-logo-icon {
  width: 34px;
  height: 34px;
  background: var(--gradient);
  border-radius: var(--radius-sm);
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 900;
  font-size: 1.1rem;
  color: white;
}

.nav-links {
  display: flex;
  align-items: center;
  gap: 8px;
}
.nav-links a {
  color: var(--text-secondary);
  font-size: 0.9rem;
  font-weight: 500;
  padding: 8px 14px;
  border-radius: var(--radius-sm);
  transition: all var(--transition);
}
.nav-links a:hover { color: var(--text-primary); background: rgba(255,255,255,0.05); }
[data-theme="light"] .nav-links a:hover { background: rgba(0,0,0,0.04); }

.nav-actions { display: flex; align-items: center; gap: 12px; }

.theme-toggle {
  background: none;
  border: 1px solid var(--border);
  color: var(--text-secondary);
  width: 36px;
  height: 36px;
  border-radius: 50%;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.1rem;
  transition: var(--transition);
}
.theme-toggle:hover { background: var(--bg-tertiary); color: var(--text-primary); }
[data-theme="dark"] .theme-icon-light { display: none; }
[data-theme="dark"] .theme-icon-dark { display: inline; }
[data-theme="light"] .theme-icon-dark { display: none; }
[data-theme="light"] .theme-icon-light { display: inline; }

.mobile-menu-btn {
  display: none;
  background: none;
  color: var(--text-primary);
  font-size: 1.5rem;
  padding: 4px;
}

/* ============================================
   VIEW SYSTEM
   ============================================ */
.view {
  display: none;
  opacity: 0;
  transition: opacity 0.3s ease;
}
.view.active {
  display: block;
  opacity: 1;
}

/* ============================================
   LANDING PAGE — HERO
   ============================================ */
.hero {
  min-height: 100vh;
  display: flex;
  align-items: center;
  position: relative;
  overflow: hidden;
  padding: 120px 0 80px;
}

.hero-bg {
  position: absolute;
  inset: 0;
  overflow: hidden;
  pointer-events: none;
}
.hero-bg::before {
  content: '';
  position: absolute;
  top: -40%;
  left: -20%;
  width: 80%;
  height: 80%;
  background: radial-gradient(ellipse, rgba(79,70,229,0.15), transparent 70%);
  animation: float 20s ease-in-out infinite;
}
.hero-bg::after {
  content: '';
  position: absolute;
  bottom: -30%;
  right: -15%;
  width: 60%;
  height: 60%;
  background: radial-gradient(ellipse, rgba(6,182,212,0.1), transparent 70%);
  animation: float 25s ease-in-out infinite reverse;
}

@keyframes float {
  0%, 100% { transform: translate(0, 0) scale(1); }
  33% { transform: translate(30px, -30px) scale(1.05); }
  66% { transform: translate(-20px, 20px) scale(0.95); }
}

.hero-content {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 24px;
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 80px;
  align-items: center;
}

.hero-text { position: relative; z-index: 1; }

.hero-badge {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 6px 14px;
  background: var(--gradient-subtle);
  border: 1px solid rgba(79,70,229,0.2);
  border-radius: 100px;
  font-size: 0.8rem;
  font-weight: 600;
  color: var(--primary-light);
  margin-bottom: 24px;
}
.hero-badge .dot {
  width: 6px; height: 6px;
  background: var(--success);
  border-radius: 50%;
  animation: pulse 2s infinite;
}

@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.4; }
}

.hero h1 {
  font-size: clamp(2.5rem, 5vw, 4rem);
  font-weight: 900;
  line-height: 1.1;
  letter-spacing: -0.03em;
  margin-bottom: 20px;
}

.hero-sub {
  font-size: 1.15rem;
  color: var(--text-secondary);
  line-height: 1.7;
  margin-bottom: 36px;
  max-width: 520px;
}

.hero-ctas { display: flex; gap: 14px; flex-wrap: wrap; margin-bottom: 48px; }

.hero-trust {
  display: flex;
  align-items: center;
  gap: 20px;
  flex-wrap: wrap;
}
.hero-trust-label {
  font-size: 0.8rem;
  color: var(--text-tertiary);
  text-transform: uppercase;
  letter-spacing: 0.05em;
  font-weight: 600;
}
.hero-trust-models {
  display: flex;
  gap: 16px;
}
.trust-model {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 0.85rem;
  color: var(--text-secondary);
  font-weight: 500;
}
.trust-model-icon {
  width: 28px;
  height: 28px;
  border-radius: var(--radius-sm);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.75rem;
  font-weight: 700;
  color: white;
}
.trust-model-icon.gpt { background: #10A37F; }
.trust-model-icon.claude { background: #D4A574; }
.trust-model-icon.gemini { background: #4285F4; }

/* Hero demo animation */
.hero-demo {
  position: relative;
  z-index: 1;
}

.demo-card {
  background: var(--bg-secondary);
  border: 1px solid var(--border);
  border-radius: var(--radius-xl);
  padding: 32px;
  box-shadow: var(--shadow-xl);
  position: relative;
}
.demo-card::before {
  content: '';
  position: absolute;
  inset: -1px;
  border-radius: var(--radius-xl);
  background: var(--gradient);
  opacity: 0.1;
  z-index: -1;
}

.demo-header {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 20px;
}
.demo-dot {
  width: 10px; height: 10px;
  border-radius: 50%;
}
.demo-dot:nth-child(1) { background: #EF4444; }
.demo-dot:nth-child(2) { background: #F59E0B; }
.demo-dot:nth-child(3) { background: #10B981; }

.demo-label {
  font-size: 0.75rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  color: var(--text-tertiary);
  margin-bottom: 10px;
}

.demo-input-text {
  font-family: var(--font-mono);
  font-size: 0.85rem;
  color: var(--text-secondary);
  line-height: 1.6;
  padding: 16px;
  background: rgba(0,0,0,0.2);
  border-radius: var(--radius-md);
  margin-bottom: 16px;
  border: 1px solid rgba(51,65,85,0.5);
}
[data-theme="light"] .demo-input-text {
  background: rgba(0,0,0,0.03);
  border-color: var(--border);
}

.demo-arrow {
  text-align: center;
  margin: 12px 0;
  color: var(--primary-light);
  font-size: 1.2rem;
  animation: arrowBounce 2s infinite;
}
@keyframes arrowBounce {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(4px); }
}

.demo-output-text {
  font-family: var(--font-mono);
  font-size: 0.82rem;
  line-height: 1.7;
  padding: 16px;
  background: rgba(79,70,229,0.08);
  border-radius: var(--radius-md);
  border: 1px solid rgba(79,70,229,0.15);
}
.demo-output-text .tag {
  color: var(--secondary);
  font-weight: 600;
}
.demo-output-text .content {
  color: var(--text-primary);
}

.demo-meta {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-top: 16px;
  flex-wrap: wrap;
}
.demo-badge {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 4px 10px;
  background: rgba(79,70,229,0.1);
  border: 1px solid rgba(79,70,229,0.2);
  border-radius: 100px;
  font-size: 0.72rem;
  color: var(--primary-light);
  font-weight: 500;
}
.demo-badge.model { background: rgba(6,182,212,0.1); border-color: rgba(6,182,212,0.2); color: var(--secondary); }
.demo-time {
  font-size: 0.75rem;
  color: var(--text-tertiary);
  margin-left: auto;
}

/* ============================================
   HOW IT WORKS
   ============================================ */
.section { padding: 100px 0; }
.section-header {
  text-align: center;
  margin-bottom: 60px;
}
.section-label {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  font-size: 0.8rem;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.1em;
  color: var(--primary-light);
  margin-bottom: 16px;
}
.section-title {
  font-size: clamp(2rem, 4vw, 2.75rem);
  font-weight: 800;
  letter-spacing: -0.02em;
  margin-bottom: 16px;
}
.section-sub {
  font-size: 1.1rem;
  color: var(--text-secondary);
  max-width: 600px;
  margin: 0 auto;
}

.steps-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 24px;
}

.step-card {
  text-align: center;
  padding: 40px 24px;
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  transition: all var(--transition);
  position: relative;
}
.step-card:hover {
  transform: translateY(-4px);
  border-color: var(--primary-light);
  box-shadow: 0 8px 24px rgba(79,70,229,0.15);
}

.step-number {
  position: absolute;
  top: 16px;
  left: 20px;
  font-size: 0.7rem;
  font-weight: 700;
  color: var(--text-tertiary);
  letter-spacing: 0.05em;
}

.step-icon {
  width: 64px;
  height: 64px;
  border-radius: var(--radius-md);
  background: var(--gradient-subtle);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.8rem;
  margin: 0 auto 20px;
}

.step-title {
  font-size: 1.1rem;
  font-weight: 700;
  margin-bottom: 10px;
}
.step-desc {
  font-size: 0.9rem;
  color: var(--text-secondary);
  line-height: 1.6;
}

/* ============================================
   FEATURES
   ============================================ */
.features-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 20px;
}

.feature-card {
  padding: 32px;
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  transition: all var(--transition);
}
.feature-card:hover {
  border-color: rgba(79,70,229,0.3);
  background: var(--bg-card-hover);
}

.feature-icon {
  width: 48px;
  height: 48px;
  border-radius: var(--radius-md);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.4rem;
  margin-bottom: 18px;
  background: var(--gradient-subtle);
}

.feature-title {
  font-size: 1.05rem;
  font-weight: 700;
  margin-bottom: 10px;
}
.feature-desc {
  font-size: 0.9rem;
  color: var(--text-secondary);
  line-height: 1.6;
}

/* ============================================
   SOCIAL PROOF
   ============================================ */
.proof-section {
  background: var(--bg-secondary);
  border-top: 1px solid var(--border);
  border-bottom: 1px solid var(--border);
}

.stats-row {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 32px;
  margin-bottom: 60px;
}

.stat-card {
  text-align: center;
  padding: 32px;
}
.stat-value {
  font-size: 2.5rem;
  font-weight: 900;
  letter-spacing: -0.02em;
  margin-bottom: 4px;
}
.stat-label {
  font-size: 0.9rem;
  color: var(--text-secondary);
}

.testimonials-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 20px;
}

.testimonial-card {
  padding: 28px;
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
}
.testimonial-stars {
  color: var(--warning);
  font-size: 0.9rem;
  margin-bottom: 14px;
  letter-spacing: 2px;
}
.testimonial-text {
  font-size: 0.95rem;
  color: var(--text-secondary);
  line-height: 1.7;
  margin-bottom: 18px;
  font-style: italic;
}
.testimonial-author {
  display: flex;
  align-items: center;
  gap: 12px;
}
.testimonial-avatar {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  background: var(--gradient);
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  font-weight: 700;
  font-size: 0.85rem;
}
.testimonial-name {
  font-size: 0.9rem;
  font-weight: 600;
}
.testimonial-role {
  font-size: 0.8rem;
  color: var(--text-tertiary);
}

/* ============================================
   PRICING
   ============================================ */
.pricing-toggle {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 16px;
  margin-bottom: 48px;
}
.pricing-toggle span {
  font-size: 0.9rem;
  color: var(--text-secondary);
  font-weight: 500;
}
.pricing-toggle span.active { color: var(--text-primary); font-weight: 600; }

.toggle-switch {
  width: 52px;
  height: 28px;
  background: var(--bg-tertiary);
  border-radius: 100px;
  position: relative;
  cursor: pointer;
  transition: background var(--transition);
}
.toggle-switch.active { background: var(--primary); }
.toggle-switch::after {
  content: '';
  position: absolute;
  top: 3px;
  left: 3px;
  width: 22px;
  height: 22px;
  background: white;
  border-radius: 50%;
  transition: transform var(--transition);
}
.toggle-switch.active::after { transform: translateX(24px); }

.save-badge {
  font-size: 0.75rem;
  font-weight: 600;
  color: var(--success);
  background: rgba(16,185,129,0.1);
  padding: 2px 8px;
  border-radius: 100px;
}

.pricing-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 20px;
  align-items: start;
}

.price-card {
  padding: 32px;
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  transition: all var(--transition);
  position: relative;
}
.price-card.popular {
  border-color: var(--primary-light);
  box-shadow: 0 0 0 1px var(--primary-light), 0 8px 32px rgba(79,70,229,0.2);
}
.price-card:hover {
  transform: translateY(-2px);
}

.popular-badge {
  position: absolute;
  top: -12px;
  left: 50%;
  transform: translateX(-50%);
  background: var(--gradient);
  color: white;
  font-size: 0.72rem;
  font-weight: 700;
  padding: 4px 14px;
  border-radius: 100px;
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.price-name {
  font-size: 1.1rem;
  font-weight: 700;
  margin-bottom: 4px;
}
.price-desc {
  font-size: 0.82rem;
  color: var(--text-tertiary);
  margin-bottom: 20px;
}
.price-amount {
  font-size: 2.5rem;
  font-weight: 900;
  letter-spacing: -0.02em;
}
.price-amount span { font-size: 0.9rem; font-weight: 500; color: var(--text-tertiary); }
.price-period {
  font-size: 0.82rem;
  color: var(--text-tertiary);
  margin-bottom: 24px;
}

.price-features {
  list-style: none;
  margin-bottom: 28px;
}
.price-features li {
  display: flex;
  align-items: flex-start;
  gap: 10px;
  padding: 8px 0;
  font-size: 0.88rem;
  color: var(--text-secondary);
}
.price-features li::before {
  content: '\2713';
  color: var(--success);
  font-weight: 700;
  flex-shrink: 0;
  margin-top: 1px;
}
.price-features li.disabled {
  color: var(--text-tertiary);
  text-decoration: line-through;
  opacity: 0.5;
}
.price-features li.disabled::before {
  content: '\2717';
  color: var(--text-tertiary);
}

.price-card .btn { width: 100%; }

/* ============================================
   FAQ
   ============================================ */
.faq-list {
  max-width: 720px;
  margin: 0 auto;
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.faq-item {
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  overflow: hidden;
  transition: border-color var(--transition);
}
.faq-item.open { border-color: rgba(79,70,229,0.3); }

.faq-question {
  width: 100%;
  padding: 20px 24px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  background: none;
  color: var(--text-primary);
  font-size: 0.95rem;
  font-weight: 600;
  text-align: left;
  cursor: pointer;
}
.faq-question:hover { color: var(--primary-light); }

.faq-icon {
  font-size: 1.2rem;
  color: var(--text-tertiary);
  transition: transform var(--transition);
  flex-shrink: 0;
  margin-left: 16px;
}
.faq-item.open .faq-icon { transform: rotate(45deg); }

.faq-answer {
  max-height: 0;
  overflow: hidden;
  transition: max-height 0.3s ease, padding 0.3s ease;
}
.faq-item.open .faq-answer {
  max-height: 300px;
}
.faq-answer-inner {
  padding: 0 24px 20px;
  font-size: 0.9rem;
  color: var(--text-secondary);
  line-height: 1.7;
}

/* ============================================
   FOOTER
   ============================================ */
.footer {
  border-top: 1px solid var(--border);
  padding: 60px 0 32px;
}

.footer-grid {
  display: grid;
  grid-template-columns: 2fr repeat(3, 1fr);
  gap: 48px;
  margin-bottom: 48px;
}

.footer-brand-desc {
  font-size: 0.88rem;
  color: var(--text-secondary);
  line-height: 1.7;
  margin-top: 12px;
  max-width: 280px;
}

.footer-col-title {
  font-size: 0.8rem;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  color: var(--text-tertiary);
  margin-bottom: 16px;
}

.footer-links {
  list-style: none;
  display: flex;
  flex-direction: column;
  gap: 10px;
}
.footer-links a {
  font-size: 0.88rem;
  color: var(--text-secondary);
}
.footer-links a:hover { color: var(--text-primary); }

.footer-bottom {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding-top: 24px;
  border-top: 1px solid var(--border);
  font-size: 0.8rem;
  color: var(--text-tertiary);
  flex-wrap: wrap;
  gap: 12px;
}

.footer-social {
  display: flex;
  gap: 16px;
}
.footer-social a {
  color: var(--text-tertiary);
  font-size: 0.85rem;
  font-weight: 500;
}
.footer-social a:hover { color: var(--primary-light); }

/* ============================================
   AUTH VIEWS
   ============================================ */
.auth-view {
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 40px 24px;
  position: relative;
}
.auth-view .hero-bg { opacity: 0.5; }

.auth-card {
  width: 100%;
  max-width: 420px;
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: var(--radius-xl);
  padding: 40px;
  box-shadow: var(--shadow-xl);
  position: relative;
  z-index: 1;
}

.auth-logo {
  display: flex;
  align-items: center;
  gap: 10px;
  font-size: 1.2rem;
  font-weight: 800;
  margin-bottom: 32px;
  cursor: pointer;
}

.auth-title {
  font-size: 1.5rem;
  font-weight: 800;
  margin-bottom: 8px;
}
.auth-subtitle {
  font-size: 0.9rem;
  color: var(--text-secondary);
  margin-bottom: 28px;
}

.auth-form { display: flex; flex-direction: column; gap: 18px; }

.auth-divider {
  display: flex;
  align-items: center;
  gap: 16px;
  margin: 4px 0;
}
.auth-divider::before, .auth-divider::after {
  content: '';
  flex: 1;
  height: 1px;
  background: var(--border);
}
.auth-divider span {
  font-size: 0.8rem;
  color: var(--text-tertiary);
}

.google-btn {
  width: 100%;
  padding: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
  background: var(--bg-input);
  border: 1.5px solid var(--border);
  border-radius: var(--radius-md);
  color: var(--text-primary);
  font-weight: 600;
  font-size: 0.9rem;
}
.google-btn:hover {
  border-color: var(--border-light);
  background: var(--bg-card-hover);
}

.auth-footer {
  margin-top: 24px;
  text-align: center;
  font-size: 0.85rem;
  color: var(--text-secondary);
}
.auth-footer a { font-weight: 600; }

.auth-error {
  padding: 10px 14px;
  background: rgba(239,68,68,0.1);
  border: 1px solid rgba(239,68,68,0.2);
  border-radius: var(--radius-sm);
  color: var(--error);
  font-size: 0.85rem;
  display: none;
}

/* ============================================
   ONBOARDING
   ============================================ */
.onboarding-view {
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 40px 24px;
}

.onboarding-card {
  width: 100%;
  max-width: 520px;
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: var(--radius-xl);
  padding: 48px;
  box-shadow: var(--shadow-xl);
  text-align: center;
}

.onboarding-progress {
  display: flex;
  gap: 8px;
  margin-bottom: 40px;
  justify-content: center;
}
.onboarding-progress .bar {
  width: 60px;
  height: 4px;
  border-radius: 100px;
  background: var(--bg-tertiary);
  transition: background var(--transition);
}
.onboarding-progress .bar.active {
  background: var(--gradient);
}
.onboarding-progress .bar.done {
  background: var(--primary);
}

.onboarding-step { display: none; }
.onboarding-step.active { display: block; animation: fadeInUp 0.3s ease; }

@keyframes fadeInUp {
  from { opacity: 0; transform: translateY(12px); }
  to { opacity: 1; transform: translateY(0); }
}

.onboarding-icon {
  font-size: 2.5rem;
  margin-bottom: 20px;
}
.onboarding-title {
  font-size: 1.4rem;
  font-weight: 800;
  margin-bottom: 10px;
}
.onboarding-sub {
  font-size: 0.92rem;
  color: var(--text-secondary);
  margin-bottom: 32px;
}

.onboarding-options {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 12px;
  margin-bottom: 32px;
}
.onboarding-option {
  padding: 16px;
  background: var(--bg-input);
  border: 1.5px solid var(--border);
  border-radius: var(--radius-md);
  color: var(--text-primary);
  font-weight: 500;
  font-size: 0.9rem;
  cursor: pointer;
  transition: all var(--transition);
}
.onboarding-option:hover {
  border-color: var(--primary-light);
  background: rgba(79,70,229,0.05);
}
.onboarding-option.selected {
  border-color: var(--primary);
  background: rgba(79,70,229,0.1);
  color: var(--primary-light);
}

.onboarding-welcome-icon {
  font-size: 3.5rem;
  margin-bottom: 24px;
}

/* ============================================
   DASHBOARD
   ============================================ */
.dashboard-view {
  display: none;
  min-height: 100vh;
}
.dashboard-view.active { display: flex; }

.dash-sidebar {
  width: 260px;
  background: var(--bg-secondary);
  border-right: 1px solid var(--border);
  padding: 20px 0;
  display: flex;
  flex-direction: column;
  min-height: 100vh;
  position: fixed;
  left: 0;
  top: 0;
  bottom: 0;
  z-index: 100;
  transition: transform var(--transition);
}

.dash-sidebar-logo {
  display: flex;
  align-items: center;
  gap: 10px;
  font-size: 1.15rem;
  font-weight: 800;
  color: var(--text-primary);
  padding: 0 20px;
  margin-bottom: 28px;
}

.dash-nav { flex: 1; }
.dash-nav-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 11px 20px;
  color: var(--text-secondary);
  font-size: 0.9rem;
  font-weight: 500;
  cursor: pointer;
  transition: all var(--transition);
  border: none;
  background: none;
  width: 100%;
  text-align: left;
}
.dash-nav-item:hover { color: var(--text-primary); background: rgba(255,255,255,0.04); }
[data-theme="light"] .dash-nav-item:hover { background: rgba(0,0,0,0.04); }
.dash-nav-item.active {
  color: var(--primary-light);
  background: rgba(79,70,229,0.1);
  font-weight: 600;
}
.dash-nav-item .nav-icon {
  width: 20px;
  text-align: center;
  font-size: 1rem;
}
.dash-nav-item .lock-badge {
  margin-left: auto;
  font-size: 0.65rem;
  font-weight: 700;
  padding: 2px 6px;
  background: rgba(79,70,229,0.15);
  color: var(--primary-light);
  border-radius: 4px;
  text-transform: uppercase;
}

.dash-nav-divider {
  height: 1px;
  background: var(--border);
  margin: 12px 20px;
}

.dash-sidebar-footer { padding: 0 16px; }
.dash-upgrade-btn {
  width: 100%;
  padding: 12px;
  background: var(--gradient);
  color: white;
  border-radius: var(--radius-md);
  font-weight: 600;
  font-size: 0.88rem;
  text-align: center;
}
.dash-upgrade-btn:hover { opacity: 0.9; }

.dash-sidebar-user {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 16px 20px;
  margin-top: 12px;
  border-top: 1px solid var(--border);
  cursor: pointer;
}
.dash-user-avatar {
  width: 32px; height: 32px;
  border-radius: 50%;
  background: var(--gradient);
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  font-weight: 700;
  font-size: 0.8rem;
}
.dash-user-name {
  font-size: 0.85rem;
  font-weight: 600;
}
.dash-user-plan {
  font-size: 0.72rem;
  color: var(--text-tertiary);
}

.dash-main {
  flex: 1;
  margin-left: 260px;
  min-height: 100vh;
}

.dash-header {
  padding: 20px 32px;
  border-bottom: 1px solid var(--border);
  display: flex;
  align-items: center;
  justify-content: space-between;
  background: var(--bg-primary);
  position: sticky;
  top: 0;
  z-index: 50;
}

.dash-header-title {
  font-size: 1.25rem;
  font-weight: 700;
}

.dash-header-actions {
  display: flex;
  align-items: center;
  gap: 12px;
}

.dash-mobile-toggle {
  display: none;
  background: none;
  border: none;
  color: var(--text-primary);
  font-size: 1.3rem;
  cursor: pointer;
  padding: 4px;
}

.dash-content {
  padding: 32px;
}

/* Dashboard panels */
.dash-panel { display: none; }
.dash-panel.active { display: block; animation: fadeInUp 0.3s ease; }

/* Try Lucid Panel */
.enhance-container {
  max-width: 800px;
}

.enhance-input-area {
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  padding: 24px;
  margin-bottom: 20px;
}
.enhance-textarea {
  width: 100%;
  min-height: 100px;
  background: transparent;
  border: none;
  color: var(--text-primary);
  font-family: var(--font-mono);
  font-size: 0.9rem;
  line-height: 1.6;
  resize: vertical;
}
.enhance-textarea::placeholder { color: var(--text-tertiary); }
.enhance-textarea:focus { outline: none; }

.enhance-controls {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-top: 16px;
  flex-wrap: wrap;
  gap: 12px;
}
.enhance-model-select {
  display: flex;
  align-items: center;
  gap: 8px;
}
.model-chip {
  padding: 6px 14px;
  border: 1.5px solid var(--border);
  border-radius: 100px;
  font-size: 0.8rem;
  font-weight: 600;
  color: var(--text-secondary);
  cursor: pointer;
  background: transparent;
  transition: all var(--transition);
}
.model-chip.active {
  border-color: var(--primary);
  color: var(--primary-light);
  background: rgba(79,70,229,0.1);
}
.model-chip:hover:not(.active) {
  border-color: var(--border-light);
}

.enhance-result {
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  overflow: hidden;
  display: none;
}
.enhance-result.visible { display: block; animation: fadeInUp 0.4s ease; }

.enhance-result-header {
  padding: 16px 24px;
  border-bottom: 1px solid var(--border);
  display: flex;
  align-items: center;
  justify-content: space-between;
}
.enhance-result-label {
  font-size: 0.8rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  color: var(--text-tertiary);
}

.enhance-result-body {
  padding: 24px;
  font-family: var(--font-mono);
  font-size: 0.85rem;
  line-height: 1.8;
}

.enhance-result-body .section-tag {
  color: var(--secondary);
  font-weight: 600;
}
.enhance-result-body .section-content {
  color: var(--text-primary);
}

.enhance-result-footer {
  padding: 16px 24px;
  border-top: 1px solid var(--border);
  display: flex;
  align-items: center;
  justify-content: space-between;
  flex-wrap: wrap;
  gap: 12px;
}
.enhance-feedback { display: flex; gap: 8px; }
.feedback-btn {
  padding: 6px 14px;
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  background: transparent;
  color: var(--text-secondary);
  font-size: 0.85rem;
  cursor: pointer;
}
.feedback-btn:hover { border-color: var(--primary-light); color: var(--primary-light); }
.feedback-btn.selected { border-color: var(--primary); color: var(--primary-light); background: rgba(79,70,229,0.1); }

.enhance-actions { display: flex; gap: 8px; }

.processing-indicator {
  display: none;
  padding: 40px;
  text-align: center;
}
.processing-indicator.visible { display: block; }

.processing-dots {
  display: flex;
  justify-content: center;
  gap: 8px;
  margin-bottom: 16px;
}
.processing-dots span {
  width: 10px; height: 10px;
  border-radius: 50%;
  background: var(--primary);
  animation: dotPulse 1.2s infinite;
}
.processing-dots span:nth-child(2) { animation-delay: 0.2s; }
.processing-dots span:nth-child(3) { animation-delay: 0.4s; }

@keyframes dotPulse {
  0%, 80%, 100% { opacity: 0.3; transform: scale(0.8); }
  40% { opacity: 1; transform: scale(1.2); }
}

.processing-text {
  font-size: 0.9rem;
  color: var(--text-secondary);
}

/* Analytics Panel */
.analytics-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 16px;
  margin-bottom: 32px;
}

.analytics-card {
  padding: 24px;
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
}
.analytics-card-label {
  font-size: 0.78rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  color: var(--text-tertiary);
  margin-bottom: 8px;
}
.analytics-card-value {
  font-size: 2rem;
  font-weight: 800;
  letter-spacing: -0.02em;
  margin-bottom: 4px;
}
.analytics-card-sub {
  font-size: 0.8rem;
  color: var(--text-tertiary);
  display: flex;
  align-items: center;
  gap: 4px;
}
.analytics-card-sub .trend-up { color: var(--success); }
.analytics-card-sub .trend-down { color: var(--error); }

.analytics-charts {
  display: grid;
  grid-template-columns: 2fr 1fr;
  gap: 20px;
}

.chart-card {
  padding: 24px;
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
}
.chart-title {
  font-size: 0.9rem;
  font-weight: 600;
  margin-bottom: 20px;
}

.bar-chart {
  display: flex;
  align-items: flex-end;
  gap: 8px;
  height: 140px;
  padding-top: 10px;
}
.bar-chart-bar {
  flex: 1;
  background: var(--gradient);
  border-radius: 4px 4px 0 0;
  position: relative;
  transition: all var(--transition);
  min-width: 16px;
  opacity: 0.7;
}
.bar-chart-bar:hover { opacity: 1; }
.bar-chart-bar .bar-label {
  position: absolute;
  bottom: -22px;
  left: 50%;
  transform: translateX(-50%);
  font-size: 0.65rem;
  color: var(--text-tertiary);
  white-space: nowrap;
}
.bar-chart-bar .bar-value {
  position: absolute;
  top: -20px;
  left: 50%;
  transform: translateX(-50%);
  font-size: 0.7rem;
  color: var(--text-secondary);
  font-weight: 600;
  white-space: nowrap;
}

.pie-chart-container { text-align: center; }

.pie-chart {
  width: 140px;
  height: 140px;
  border-radius: 50%;
  margin: 0 auto 16px;
  position: relative;
}

.pie-legend {
  display: flex;
  flex-direction: column;
  gap: 8px;
}
.pie-legend-item {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 0.82rem;
  color: var(--text-secondary);
}
.pie-legend-dot {
  width: 10px;
  height: 10px;
  border-radius: 50%;
  flex-shrink: 0;
}

/* History Panel */
.history-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.history-item {
  padding: 16px 20px;
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: all var(--transition);
}
.history-item:hover {
  border-color: rgba(79,70,229,0.3);
  background: var(--bg-card-hover);
}

.history-item-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 6px;
}
.history-item-mode {
  font-size: 0.78rem;
  font-weight: 600;
  padding: 2px 8px;
  border-radius: 4px;
  background: rgba(79,70,229,0.1);
  color: var(--primary-light);
}
.history-item-time {
  font-size: 0.78rem;
  color: var(--text-tertiary);
}

.history-item-body {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 16px;
}
.history-item-category {
  font-size: 0.9rem;
  font-weight: 500;
  color: var(--text-primary);
}
.history-item-meta {
  display: flex;
  align-items: center;
  gap: 12px;
  flex-shrink: 0;
}
.history-item-model {
  font-size: 0.75rem;
  padding: 2px 8px;
  border-radius: 4px;
  font-weight: 600;
}
.history-item-model.gpt { background: rgba(16,163,127,0.1); color: #10A37F; }
.history-item-model.claude { background: rgba(212,165,116,0.1); color: #D4A574; }
.history-item-model.gemini { background: rgba(66,133,244,0.1); color: #4285F4; }

.history-item-score {
  font-size: 0.8rem;
  font-weight: 600;
  color: var(--text-secondary);
}

.history-item-detail {
  max-height: 0;
  overflow: hidden;
  transition: max-height 0.3s ease;
}
.history-item.expanded .history-item-detail {
  max-height: 200px;
}
.history-item-detail-inner {
  padding-top: 14px;
  margin-top: 14px;
  border-top: 1px solid var(--border);
  font-size: 0.85rem;
  color: var(--text-secondary);
  line-height: 1.6;
}

/* Settings Panel */
.settings-section {
  margin-bottom: 36px;
}
.settings-section-title {
  font-size: 1.05rem;
  font-weight: 700;
  margin-bottom: 20px;
  padding-bottom: 12px;
  border-bottom: 1px solid var(--border);
}

.settings-row {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 24px;
  margin-bottom: 18px;
}
.settings-row-label {
  flex-shrink: 0;
  min-width: 160px;
}
.settings-row-label .label { font-size: 0.9rem; font-weight: 600; margin-bottom: 2px; }
.settings-row-label .hint { font-size: 0.78rem; color: var(--text-tertiary); }
.settings-row-control { flex: 1; max-width: 400px; }

.kbd {
  display: inline-flex;
  align-items: center;
  padding: 4px 10px;
  background: var(--bg-tertiary);
  border: 1px solid var(--border-light);
  border-radius: 4px;
  font-family: var(--font-mono);
  font-size: 0.8rem;
  font-weight: 500;
  color: var(--text-secondary);
}

.danger-zone {
  padding: 24px;
  border: 1px solid rgba(239,68,68,0.2);
  border-radius: var(--radius-md);
  background: rgba(239,68,68,0.04);
}
.danger-zone-title {
  font-size: 0.95rem;
  font-weight: 700;
  color: var(--error);
  margin-bottom: 8px;
}
.danger-zone-desc {
  font-size: 0.85rem;
  color: var(--text-secondary);
  margin-bottom: 16px;
}
.btn-danger {
  padding: 10px 20px;
  background: rgba(239,68,68,0.1);
  border: 1px solid rgba(239,68,68,0.3);
  border-radius: var(--radius-md);
  color: var(--error);
  font-weight: 600;
  font-size: 0.88rem;
}
.btn-danger:hover {
  background: rgba(239,68,68,0.2);
}

/* Sidebar overlay for mobile */
.dash-overlay {
  display: none;
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.5);
  z-index: 99;
}

/* ============================================
   LOADING SPINNER
   ============================================ */
.spinner {
  width: 20px;
  height: 20px;
  border: 2px solid rgba(255,255,255,0.3);
  border-top-color: white;
  border-radius: 50%;
  animation: spin 0.6s linear infinite;
}
@keyframes spin { to { transform: rotate(360deg); } }

.btn-loading .spinner { display: inline-block; }
.btn-loading span { display: none; }

/* ============================================
   RESPONSIVE
   ============================================ */
@media (max-width: 1024px) {
  .hero-content { grid-template-columns: 1fr; gap: 40px; }
  .hero-demo { max-width: 600px; }
  .steps-grid { grid-template-columns: repeat(2, 1fr); }
  .features-grid { grid-template-columns: repeat(2, 1fr); }
  .pricing-grid { grid-template-columns: repeat(2, 1fr); }
  .footer-grid { grid-template-columns: 1fr 1fr; }
  .analytics-charts { grid-template-columns: 1fr; }
}

@media (max-width: 768px) {
  .nav-links { display: none; }
  .mobile-menu-btn { display: block; }
  .hero { padding: 100px 0 60px; }
  .hero h1 { font-size: 2.2rem; }
  .steps-grid { grid-template-columns: 1fr; }
  .features-grid { grid-template-columns: 1fr; }
  .pricing-grid { grid-template-columns: 1fr; max-width: 380px; margin: 0 auto; }
  .stats-row { grid-template-columns: 1fr; gap: 12px; }
  .footer-grid { grid-template-columns: 1fr; gap: 32px; }
  .section { padding: 60px 0; }

  .dash-sidebar {
    transform: translateX(-100%);
    box-shadow: var(--shadow-xl);
  }
  .dash-sidebar.open { transform: translateX(0); }
  .dash-overlay.open { display: block; }
  .dash-main { margin-left: 0; }
  .dash-mobile-toggle { display: block; }
  .dash-content { padding: 20px; }
  .settings-row { flex-direction: column; gap: 8px; }
  .settings-row-control { max-width: 100%; }
  .enhance-controls { flex-direction: column; align-items: flex-start; }
}

@media (max-width: 480px) {
  .hero h1 { font-size: 1.8rem; }
  .hero-ctas { flex-direction: column; }
  .hero-ctas .btn { width: 100%; }
  .hero-trust { flex-direction: column; align-items: flex-start; }
  .auth-card { padding: 28px; }
  .onboarding-card { padding: 32px; }
  .onboarding-options { grid-template-columns: 1fr; }
}
</style>
</head>
<body>

<!-- Toast Container -->
<div class="toast-container" id="toastContainer"></div>

<!-- ============================================
     LANDING PAGE VIEW
     ============================================ -->
<div class="view active" id="landingView">

  <!-- Navigation -->
  <nav class="nav" id="mainNav">
    <div class="nav-inner">
      <div class="nav-logo" onclick="navigateTo('landing')">
        <div class="nav-logo-icon">L</div>
        Lucid
      </div>
      <div class="nav-links" id="navLinks">
        <a href="#how-it-works">How It Works</a>
        <a href="#features">Features</a>
        <a href="#pricing">Pricing</a>
        <a href="#faq">FAQ</a>
      </div>
      <div class="nav-actions">
        <button class="theme-toggle" onclick="toggleTheme()" aria-label="Toggle light/dark mode" title="Toggle theme">
          <span class="theme-icon-dark">&#9790;</span>
          <span class="theme-icon-light">&#9728;</span>
        </button>
        <button class="btn btn-ghost" onclick="navigateTo('login')">Log In</button>
        <button class="btn btn-primary btn-sm" onclick="navigateTo('signup')">Get Started</button>
        <button class="mobile-menu-btn" onclick="toggleMobileMenu()" aria-label="Toggle navigation menu">&#9776;</button>
      </div>
    </div>
  </nav>

  <!-- Hero Section -->
  <section class="hero">
    <div class="hero-bg"></div>
    <div class="hero-content">
      <div class="hero-text">
        <div class="hero-badge">
          <span class="dot"></span>
          AI Intent Translation Platform
        </div>
        <h1>Stop Writing Prompts.<br><span class="text-gradient">Start Thinking.</span></h1>
        <p class="hero-sub">Lucid translates your intent into optimized prompts across ChatGPT, Claude, and Gemini — in under 500ms. It learns how you think.</p>
        <div class="hero-ctas">
          <button class="btn btn-primary btn-lg" onclick="navigateTo('signup')">Get Started Free</button>
          <button class="btn btn-secondary btn-lg" onclick="scrollToSection('how-it-works')">See How It Works</button>
        </div>
        <div class="hero-trust">
          <span class="hero-trust-label">Works with</span>
          <div class="hero-trust-models">
            <span class="trust-model"><span class="trust-model-icon gpt">G</span> ChatGPT</span>
            <span class="trust-model"><span class="trust-model-icon claude">C</span> Claude</span>
            <span class="trust-model"><span class="trust-model-icon gemini">G</span> Gemini</span>
          </div>
        </div>
      </div>
      <div class="hero-demo">
        <div class="demo-card">
          <div class="demo-header">
            <span class="demo-dot"></span>
            <span class="demo-dot"></span>
            <span class="demo-dot"></span>
          </div>
          <div class="demo-label">Your Input</div>
          <div class="demo-input-text">help me write a cold email to a VP of sales about our new analytics product</div>
          <div class="demo-arrow">&#8595; Enhanced by Lucid</div>
          <div class="demo-label">Lucid Output</div>
          <div class="demo-output-text">
            <span class="tag">[ROLE]</span> <span class="content">You are an experienced B2B sales consultant who specializes in SaaS analytics platforms.</span><br><br>
            <span class="tag">[CONTEXT]</span> <span class="content">I'm reaching out to a VP of Sales at a mid-market SaaS company about our new analytics product that provides real-time pipeline insights.</span><br><br>
            <span class="tag">[TASK]</span> <span class="content">Write a compelling cold email that opens a conversation.</span><br><br>
            <span class="tag">[FORMAT]</span> <span class="content">Under 150 words. Compelling subject line. Clear CTA.</span><br><br>
            <span class="tag">[CONSTRAINTS]</span> <span class="content">Professional but warm. No jargon. Data-driven hook.</span>
          </div>
          <div class="demo-meta">
            <span class="demo-badge model">Claude</span>
            <span class="demo-badge">Professional Tone</span>
            <span class="demo-badge">Concise</span>
            <span class="demo-time">Enhanced in 340ms</span>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- How It Works -->
  <section class="section" id="how-it-works">
    <div class="container">
      <div class="section-header">
        <div class="section-label">How It Works</div>
        <h2 class="section-title">Four steps to dramatically better AI output</h2>
        <p class="section-sub">Lucid works invisibly inside your AI tools. No copy-pasting. No prompt libraries. Just better thinking.</p>
      </div>
      <div class="steps-grid">
        <div class="step-card">
          <span class="step-number">01</span>
          <div class="step-icon">&#128173;</div>
          <h3 class="step-title">Think Naturally</h3>
          <p class="step-desc">Type your rough idea, just like you normally would. No special syntax or formatting needed.</p>
        </div>
        <div class="step-card">
          <span class="step-number">02</span>
          <div class="step-icon">&#9889;</div>
          <h3 class="step-title">Lucid Enhances</h3>
          <p class="step-desc">Your intent is translated and optimized for your chosen AI model in under 500 milliseconds.</p>
        </div>
        <div class="step-card">
          <span class="step-number">03</span>
          <div class="step-icon">&#127919;</div>
          <h3 class="step-title">AI Delivers</h3>
          <p class="step-desc">Get dramatically better, more relevant outputs. Structured prompts yield structured results.</p>
        </div>
        <div class="step-card">
          <span class="step-number">04</span>
          <div class="step-icon">&#129504;</div>
          <h3 class="step-title">Lucid Learns</h3>
          <p class="step-desc">Gets smarter about you with every use. After 50 enhancements, it knows your style better than you do.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Features -->
  <section class="section" id="features" style="background: var(--bg-secondary); border-top: 1px solid var(--border); border-bottom: 1px solid var(--border);">
    <div class="container">
      <div class="section-header">
        <div class="section-label">Features</div>
        <h2 class="section-title">Everything you need for better AI conversations</h2>
        <p class="section-sub">One tool. Every model. Personalized to you.</p>
      </div>
      <div class="features-grid">
        <div class="feature-card">
          <div class="feature-icon">&#128268;</div>
          <h3 class="feature-title">Web App</h3>
          <p class="feature-desc">Works instantly in your browser. No installs. Type your intent, copy the optimized prompt into any AI tool.</p>
        </div>
        <div class="feature-card">
          <div class="feature-icon">&#128279;</div>
          <h3 class="feature-title">Multi-Model Optimization</h3>
          <p class="feature-desc">Optimized for ChatGPT, Claude, AND Gemini. One tool that understands the nuances of every model.</p>
        </div>
        <div class="feature-card">
          <div class="feature-icon">&#127793;</div>
          <h3 class="feature-title">Deep Personalization</h3>
          <p class="feature-desc">After 50 enhancements, Lucid knows your style better than you do. It adapts to your tone, preferences, and domain.</p>
        </div>
        <div class="feature-card">
          <div class="feature-icon">&#128200;</div>
          <h3 class="feature-title">Quality Scoring</h3>
          <p class="feature-desc">See how well your AI output matched your intent. Continuous feedback loop that improves over time.</p>
        </div>
        <div class="feature-card">
          <div class="feature-icon">&#128101;</div>
          <h3 class="feature-title">Team Features</h3>
          <p class="feature-desc">Shared prompt intelligence. Brand voice consistency. Team analytics to understand how your team uses AI.</p>
        </div>
        <div class="feature-card">
          <div class="feature-icon">&#128274;</div>
          <h3 class="feature-title">Privacy First</h3>
          <p class="feature-desc">We never store your conversations. Only enhancement metadata. Your ideas stay yours.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Social Proof -->
  <section class="section proof-section" id="social-proof">
    <div class="container">
      <div class="section-header">
        <div class="section-label">Trusted by Thousands</div>
        <h2 class="section-title">People are getting better AI outputs</h2>
      </div>
      <div class="stats-row">
        <div class="stat-card">
          <div class="stat-value text-gradient">2M+</div>
          <div class="stat-label">Prompts Enhanced</div>
        </div>
        <div class="stat-card">
          <div class="stat-value text-gradient">4.8/5</div>
          <div class="stat-label">Average Rating</div>
        </div>
        <div class="stat-card">
          <div class="stat-value text-gradient">97%</div>
          <div class="stat-label">Report Better AI Outputs</div>
        </div>
      </div>
      <div class="testimonials-grid">
        <div class="testimonial-card">
          <div class="testimonial-stars">&#9733;&#9733;&#9733;&#9733;&#9733;</div>
          <p class="testimonial-text">"I used to spend 10 minutes crafting prompts. Now I just dump my thoughts and Lucid handles the rest. My team's content output doubled in a month."</p>
          <div class="testimonial-author">
            <div class="testimonial-avatar">SK</div>
            <div>
              <div class="testimonial-name">Sarah Kim</div>
              <div class="testimonial-role">Marketing Director, TechScale</div>
            </div>
          </div>
        </div>
        <div class="testimonial-card">
          <div class="testimonial-stars">&#9733;&#9733;&#9733;&#9733;&#9733;</div>
          <p class="testimonial-text">"As a developer, I was skeptical. But Lucid genuinely understands technical context. My code generation prompts went from mediocre to precise."</p>
          <div class="testimonial-author">
            <div class="testimonial-avatar">MR</div>
            <div>
              <div class="testimonial-name">Marcus Rivera</div>
              <div class="testimonial-role">Freelance Developer</div>
            </div>
          </div>
        </div>
        <div class="testimonial-card">
          <div class="testimonial-stars">&#9733;&#9733;&#9733;&#9733;&#9733;</div>
          <p class="testimonial-text">"We rolled Lucid out to our whole startup. The brand voice consistency alone was worth it. Everyone's AI outputs now sound like us."</p>
          <div class="testimonial-author">
            <div class="testimonial-avatar">JC</div>
            <div>
              <div class="testimonial-name">Jamie Chen</div>
              <div class="testimonial-role">CEO, NovaBrand</div>
            </div>
          </div>
        </div>
        <div class="testimonial-card">
          <div class="testimonial-stars">&#9733;&#9733;&#9733;&#9733;&#9733;</div>
          <p class="testimonial-text">"I write 20+ pieces of content a week. Lucid cut my AI iteration cycles in half. The personalization after the first month was genuinely impressive."</p>
          <div class="testimonial-author">
            <div class="testimonial-avatar">AT</div>
            <div>
              <div class="testimonial-name">Ava Torres</div>
              <div class="testimonial-role">Content Strategist</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Pricing -->
  <section class="section" id="pricing">
    <div class="container">
      <div class="section-header">
        <div class="section-label">Pricing</div>
        <h2 class="section-title">Simple, transparent pricing</h2>
        <p class="section-sub">Start free. Upgrade when you need more.</p>
      </div>
      <div class="pricing-toggle">
        <span id="monthlyLabel" class="active">Monthly</span>
        <div class="toggle-switch" id="pricingToggle" onclick="togglePricing()"></div>
        <span id="annualLabel">Annual</span>
        <span class="save-badge">Save 20%</span>
      </div>
      <div class="pricing-grid">
        <!-- Free -->
        <div class="price-card">
          <div class="price-name">Free</div>
          <div class="price-desc">Get started with Lucid</div>
          <div class="price-amount">$0</div>
          <div class="price-period">Free forever</div>
          <ul class="price-features">
            <li>20 enhancements/month</li>
            <li>1 AI model</li>
            <li>Basic enhancement</li>
            <li>Web dashboard</li>
            <li class="disabled">Personalization</li>
            <li class="disabled">Analytics</li>
            <li class="disabled">Team features</li>
          </ul>
          <button class="btn btn-secondary" onclick="navigateTo('signup')">Get Started</button>
        </div>
        <!-- Pro -->
        <div class="price-card popular">
          <div class="popular-badge">Most Popular</div>
          <div class="price-name">Pro</div>
          <div class="price-desc">For power users</div>
          <div class="price-amount" data-monthly="29" data-annual="23">$29<span>/mo</span></div>
          <div class="price-period price-period-monthly">Billed monthly</div>
          <div class="price-period price-period-annual" style="display:none;">Billed annually ($276/yr)</div>
          <ul class="price-features">
            <li>1,000 enhancements/month</li>
            <li>All AI models</li>
            <li>Full personalization</li>
            <li>Enhancement analytics</li>
            <li>Quality scoring</li>
            <li>Priority processing</li>
            <li class="disabled">Team features</li>
          </ul>
          <button class="btn btn-primary" onclick="navigateTo('signup')">Start Pro Trial</button>
        </div>
        <!-- Team -->
        <div class="price-card">
          <div class="price-name">Team</div>
          <div class="price-desc">5 seats included</div>
          <div class="price-amount" data-monthly="99" data-annual="79">$99<span>/mo</span></div>
          <div class="price-period price-period-monthly">Billed monthly</div>
          <div class="price-period price-period-annual" style="display:none;">Billed annually ($948/yr)</div>
          <ul class="price-features">
            <li>5,000 enhancements/month</li>
            <li>All AI models</li>
            <li>Shared styles &amp; templates</li>
            <li>Team analytics</li>
            <li>Brand voice profiles</li>
            <li>Admin dashboard</li>
            <li>Onboarding support</li>
          </ul>
          <button class="btn btn-secondary" onclick="navigateTo('signup')">Start Team Trial</button>
        </div>
        <!-- Business -->
        <div class="price-card">
          <div class="price-name">Business</div>
          <div class="price-desc">15 seats included</div>
          <div class="price-amount" data-monthly="249" data-annual="199">$249<span>/mo</span></div>
          <div class="price-period price-period-monthly">Billed monthly</div>
          <div class="price-period price-period-annual" style="display:none;">Billed annually ($2,388/yr)</div>
          <ul class="price-features">
            <li>20,000 enhancements/month</li>
            <li>All AI models</li>
            <li>SSO &amp; SAML</li>
            <li>API access</li>
            <li>Custom integrations</li>
            <li>Priority support</li>
            <li>Dedicated success manager</li>
          </ul>
          <button class="btn btn-secondary" onclick="navigateTo('signup')">Contact Sales</button>
        </div>
      </div>
    </div>
  </section>

  <!-- FAQ -->
  <section class="section" id="faq" style="background: var(--bg-secondary); border-top: 1px solid var(--border);">
    <div class="container">
      <div class="section-header">
        <div class="section-label">FAQ</div>
        <h2 class="section-title">Frequently asked questions</h2>
      </div>
      <div class="faq-list">
        <div class="faq-item">
          <button class="faq-question" onclick="toggleFaq(this)">
            How does Lucid work?
            <span class="faq-icon">+</span>
          </button>
          <div class="faq-answer"><div class="faq-answer-inner">Lucid is a web app that turns your raw ideas into optimized prompts for any AI model (ChatGPT, Claude, Gemini). Just type what you want, and Lucid restructures it with role context, task clarity, format instructions, and constraints — all in under 3 seconds. Copy the result, paste it into your AI tool, and get dramatically better responses. Over time, it learns your preferences and style to make enhancements even more personalized.</div></div>
        </div>
        <div class="faq-item">
          <button class="faq-question" onclick="toggleFaq(this)">
            Is my data private?
            <span class="faq-icon">+</span>
          </button>
          <div class="faq-answer"><div class="faq-answer-inner">Absolutely. Lucid never stores your actual prompts or conversations. We only retain anonymous enhancement metadata (like which model was used, enhancement mode, and quality scores) to improve the service. Your ideas and conversations stay entirely between you and your AI tool. We're SOC 2 compliant and all data is encrypted in transit and at rest.</div></div>
        </div>
        <div class="faq-item">
          <button class="faq-question" onclick="toggleFaq(this)">
            Which AI models are supported?
            <span class="faq-icon">+</span>
          </button>
          <div class="faq-answer"><div class="faq-answer-inner">Lucid currently supports ChatGPT (including GPT-4 and GPT-4o), Claude (all versions), and Google Gemini. Each model has different strengths, and Lucid optimizes your prompts differently for each one. We're actively adding support for more models and platforms.</div></div>
        </div>
        <div class="faq-item">
          <button class="faq-question" onclick="toggleFaq(this)">
            Can I use it with my team?
            <span class="faq-icon">+</span>
          </button>
          <div class="faq-answer"><div class="faq-answer-inner">Yes! Our Team plan ($99/month) includes 5 seats with shared prompt styles, brand voice profiles, and team analytics. You can see how your team uses AI, maintain consistent output quality, and build shared enhancement templates. The Business plan extends this to 15 seats with SSO, API access, and a dedicated success manager.</div></div>
        </div>
        <div class="faq-item">
          <button class="faq-question" onclick="toggleFaq(this)">
            What if the AI platforms change their interface?
            <span class="faq-icon">+</span>
          </button>
          <div class="faq-answer"><div class="faq-answer-inner">Lucid works independently of any AI platform's interface — it's a standalone web app. You're never affected by ChatGPT, Claude, or Gemini UI changes. Just type your intent in Lucid, copy the optimized prompt, and paste it wherever you need. Your workflow is always uninterrupted.</div></div>
        </div>
        <div class="faq-item">
          <button class="faq-question" onclick="toggleFaq(this)">
            Do I need to install anything?
            <span class="faq-icon">+</span>
          </button>
          <div class="faq-answer"><div class="faq-answer-inner">Nothing. Lucid is a web app — just sign up and start using it instantly in your browser. No extensions, no desktop apps, no downloads. Type your intent, get an optimized prompt, copy it into ChatGPT, Claude, or Gemini.</div></div>
        </div>
        <div class="faq-item">
          <button class="faq-question" onclick="toggleFaq(this)">
            How is this different from prompt libraries?
            <span class="faq-icon">+</span>
          </button>
          <div class="faq-answer"><div class="faq-answer-inner">Prompt libraries give you static templates. Lucid understands your intent dynamically. Instead of searching through hundreds of templates, you just type what you're thinking and Lucid translates it into an optimized prompt in real-time. It's the difference between using a phrasebook and having a live translator who knows you personally.</div></div>
        </div>
        <div class="faq-item">
          <button class="faq-question" onclick="toggleFaq(this)">
            Can I try it before paying?
            <span class="faq-icon">+</span>
          </button>
          <div class="faq-answer"><div class="faq-answer-inner">Yes! The Free plan gives you 20 enhancements per month with one AI model — no credit card required. It's enough to experience the core value. Most users upgrade to Pro within the first week because the difference in AI output quality is immediately noticeable.</div></div>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="footer">
    <div class="container">
      <div class="footer-grid">
        <div>
          <div class="nav-logo" onclick="navigateTo('landing')" style="margin-bottom: 4px;">
            <div class="nav-logo-icon">L</div>
            Lucid
          </div>
          <p class="footer-brand-desc">Built with obsessive attention to prompt quality. Clear thinking, clear prompts.</p>
        </div>
        <div>
          <div class="footer-col-title">Product</div>
          <ul class="footer-links">
            <li><a href="#features">Features</a></li>
            <li><a href="#pricing">Pricing</a></li>
            <li><a href="#how-it-works">How It Works</a></li>
            <li><a href="#" onclick="event.preventDefault(); showToast('Blog coming soon!', 'info')">Blog</a></li>
          </ul>
        </div>
        <div>
          <div class="footer-col-title">Resources</div>
          <ul class="footer-links">
            <li><a href="#" onclick="event.preventDefault(); showToast('Documentation coming soon!', 'info')">Docs</a></li>
            <li><a href="#" onclick="event.preventDefault(); showToast('API reference coming soon!', 'info')">API Reference</a></li>
            <li><a href="#" onclick="event.preventDefault(); showToast('Changelog coming soon!', 'info')">Changelog</a></li>
            <li><a href="#" onclick="event.preventDefault(); showToast('Status page coming soon!', 'info')">Status</a></li>
          </ul>
        </div>
        <div>
          <div class="footer-col-title">Legal</div>
          <ul class="footer-links">
            <li><a href="#" onclick="event.preventDefault(); showToast('Privacy policy coming soon!', 'info')">Privacy Policy</a></li>
            <li><a href="#" onclick="event.preventDefault(); showToast('Terms of service coming soon!', 'info')">Terms of Service</a></li>
            <li><a href="#" onclick="event.preventDefault(); showToast('Cookie policy coming soon!', 'info')">Cookie Policy</a></li>
          </ul>
        </div>
      </div>
      <div class="footer-bottom">
        <span>&copy; 2026 Lucid. All rights reserved.</span>
        <div class="footer-social">
          <a href="#" onclick="event.preventDefault()">Twitter</a>
          <a href="#" onclick="event.preventDefault()">Discord</a>
          <a href="#" onclick="event.preventDefault()">GitHub</a>
        </div>
      </div>
    </div>
  </footer>

</div>

<!-- ============================================
     SIGNUP VIEW
     ============================================ -->
<div class="view" id="signupView">
  <div class="auth-view">
    <div class="hero-bg"></div>
    <div class="auth-card">
      <div class="auth-logo" onclick="navigateTo('landing')">
        <div class="nav-logo-icon">L</div>
        Lucid
      </div>
      <h2 class="auth-title">Create your free account</h2>
      <p class="auth-subtitle">Start enhancing your AI prompts in under a minute.</p>
      <div class="auth-form">
        <button class="google-btn" onclick="fakeGoogleSignup()">
          <svg width="18" height="18" viewBox="0 0 18 18"><path fill="#4285F4" d="M17.64 9.2c0-.637-.057-1.251-.164-1.84H9v3.481h4.844c-.209 1.125-.843 2.078-1.796 2.717v2.258h2.908c1.702-1.567 2.684-3.874 2.684-6.615z"/><path fill="#34A853" d="M9 18c2.43 0 4.467-.806 5.956-2.18l-2.908-2.259c-.806.54-1.837.86-3.048.86-2.344 0-4.328-1.584-5.036-3.711H.957v2.332C2.438 15.983 5.482 18 9 18z"/><path fill="#FBBC05" d="M3.964 10.71c-.18-.54-.282-1.117-.282-1.71s.102-1.17.282-1.71V4.958H.957C.347 6.173 0 7.548 0 9s.348 2.827.957 4.042l3.007-2.332z"/><path fill="#EA4335" d="M9 3.58c1.321 0 2.508.454 3.44 1.345l2.582-2.58C13.463.891 11.426 0 9 0 5.482 0 2.438 2.017.957 4.958L3.964 7.29C4.672 5.163 6.656 3.58 9 3.58z"/></svg>
          Continue with Google
        </button>
        <div class="auth-divider"><span>or</span></div>
        <div class="auth-error" id="signupError">Please fill in all fields.</div>
        <div class="form-group">
          <label class="form-label" for="signupName">Full Name</label>
          <input type="text" class="form-input" id="signupName" placeholder="Jane Smith" autocomplete="name">
        </div>
        <div class="form-group">
          <label class="form-label" for="signupEmail">Email Address</label>
          <input type="email" class="form-input" id="signupEmail" placeholder="jane@company.com" autocomplete="email">
        </div>
        <div class="form-group">
          <label class="form-label" for="signupPassword">Password</label>
          <input type="password" class="form-input" id="signupPassword" placeholder="8+ characters" autocomplete="new-password">
        </div>
        <label class="checkbox-group">
          <input type="checkbox" id="signupTerms">
          <span style="font-size: 0.85rem; color: var(--text-secondary);">I agree to the <a href="#">Terms of Service</a> and <a href="#">Privacy Policy</a></span>
        </label>
        <button class="btn btn-primary" id="signupBtn" onclick="handleSignup()" style="width:100%;">
          <span>Create Account</span>
          <div class="spinner" style="display:none;"></div>
        </button>
      </div>
      <div class="auth-footer">
        Already have an account? <a href="#" onclick="event.preventDefault(); navigateTo('login')">Log in</a>
      </div>
    </div>
  </div>
</div>

<!-- ============================================
     LOGIN VIEW
     ============================================ -->
<div class="view" id="loginView">
  <div class="auth-view">
    <div class="hero-bg"></div>
    <div class="auth-card">
      <div class="auth-logo" onclick="navigateTo('landing')">
        <div class="nav-logo-icon">L</div>
        Lucid
      </div>
      <h2 class="auth-title">Welcome back</h2>
      <p class="auth-subtitle">Log in to your Lucid account.</p>
      <div class="auth-form">
        <button class="google-btn" onclick="fakeGoogleLogin()">
          <svg width="18" height="18" viewBox="0 0 18 18"><path fill="#4285F4" d="M17.64 9.2c0-.637-.057-1.251-.164-1.84H9v3.481h4.844c-.209 1.125-.843 2.078-1.796 2.717v2.258h2.908c1.702-1.567 2.684-3.874 2.684-6.615z"/><path fill="#34A853" d="M9 18c2.43 0 4.467-.806 5.956-2.18l-2.908-2.259c-.806.54-1.837.86-3.048.86-2.344 0-4.328-1.584-5.036-3.711H.957v2.332C2.438 15.983 5.482 18 9 18z"/><path fill="#FBBC05" d="M3.964 10.71c-.18-.54-.282-1.117-.282-1.71s.102-1.17.282-1.71V4.958H.957C.347 6.173 0 7.548 0 9s.348 2.827.957 4.042l3.007-2.332z"/><path fill="#EA4335" d="M9 3.58c1.321 0 2.508.454 3.44 1.345l2.582-2.58C13.463.891 11.426 0 9 0 5.482 0 2.438 2.017.957 4.958L3.964 7.29C4.672 5.163 6.656 3.58 9 3.58z"/></svg>
          Continue with Google
        </button>
        <div class="auth-divider"><span>or</span></div>
        <div class="auth-error" id="loginError">Invalid email or password.</div>
        <div class="form-group">
          <label class="form-label" for="loginEmail">Email Address</label>
          <input type="email" class="form-input" id="loginEmail" placeholder="jane@company.com" autocomplete="email">
        </div>
        <div class="form-group">
          <label class="form-label" for="loginPassword">Password</label>
          <input type="password" class="form-input" id="loginPassword" placeholder="Enter your password" autocomplete="current-password">
        </div>
        <div style="display:flex; justify-content:flex-end;">
          <a href="#" style="font-size:0.85rem;" onclick="event.preventDefault(); showToast('Check your email for a password reset link.', 'info')">Forgot password?</a>
        </div>
        <button class="btn btn-primary" id="loginBtn" onclick="handleLogin()" style="width:100%;">
          <span>Log In</span>
          <div class="spinner" style="display:none;"></div>
        </button>
      </div>
      <div class="auth-footer">
        Don't have an account? <a href="#" onclick="event.preventDefault(); navigateTo('signup')">Sign up free</a>
      </div>
    </div>
  </div>
</div>

<!-- ============================================
     ONBOARDING VIEW
     ============================================ -->
<div class="view" id="onboardingView">
  <div class="onboarding-view">
    <div class="onboarding-card">
      <div class="onboarding-progress">
        <div class="bar" id="obBar1"></div>
        <div class="bar" id="obBar2"></div>
        <div class="bar" id="obBar3"></div>
        <div class="bar" id="obBar4"></div>
      </div>

      <!-- Step 1: Role -->
      <div class="onboarding-step" id="obStep1">
        <div class="onboarding-icon">&#128188;</div>
        <h2 class="onboarding-title">What's your role?</h2>
        <p class="onboarding-sub">This helps Lucid personalize your enhancement style.</p>
        <div class="onboarding-options" id="roleOptions">
          <button class="onboarding-option" onclick="selectOption(this, 'role')">Marketer</button>
          <button class="onboarding-option" onclick="selectOption(this, 'role')">Developer</button>
          <button class="onboarding-option" onclick="selectOption(this, 'role')">Writer</button>
          <button class="onboarding-option" onclick="selectOption(this, 'role')">Designer</button>
          <button class="onboarding-option" onclick="selectOption(this, 'role')">Consultant</button>
          <button class="onboarding-option" onclick="selectOption(this, 'role')">Other</button>
        </div>
        <button class="btn btn-primary" onclick="nextOnboardingStep()" style="width:100%;">Continue</button>
      </div>

      <!-- Step 2: Primary AI Tool -->
      <div class="onboarding-step" id="obStep2">
        <div class="onboarding-icon">&#129302;</div>
        <h2 class="onboarding-title">Primary AI tool?</h2>
        <p class="onboarding-sub">We'll optimize enhancements for your favorite model first.</p>
        <div class="onboarding-options" id="toolOptions">
          <button class="onboarding-option" onclick="selectOption(this, 'tool')">ChatGPT</button>
          <button class="onboarding-option" onclick="selectOption(this, 'tool')">Claude</button>
          <button class="onboarding-option" onclick="selectOption(this, 'tool')">Gemini</button>
          <button class="onboarding-option" onclick="selectOption(this, 'tool')">Multiple</button>
        </div>
        <button class="btn btn-primary" onclick="nextOnboardingStep()" style="width:100%;">Continue</button>
      </div>

      <!-- Step 3: Preferred Tone -->
      <div class="onboarding-step" id="obStep3">
        <div class="onboarding-icon">&#127908;</div>
        <h2 class="onboarding-title">Preferred tone?</h2>
        <p class="onboarding-sub">Lucid will match your natural communication style.</p>
        <div class="onboarding-options" id="toneOptions">
          <button class="onboarding-option" onclick="selectOption(this, 'tone')">Professional</button>
          <button class="onboarding-option" onclick="selectOption(this, 'tone')">Casual</button>
          <button class="onboarding-option" onclick="selectOption(this, 'tone')">Technical</button>
          <button class="onboarding-option" onclick="selectOption(this, 'tone')">Creative</button>
        </div>
        <button class="btn btn-primary" onclick="nextOnboardingStep()" style="width:100%;">Continue</button>
      </div>

      <!-- Step 4: Welcome -->
      <div class="onboarding-step" id="obStep4">
        <div class="onboarding-welcome-icon">&#127881;</div>
        <h2 class="onboarding-title">Welcome to Lucid!</h2>
        <p class="onboarding-sub" id="welcomeMsg">Your personalized AI enhancement experience is ready. Let's make your first enhancement.</p>
        <button class="btn btn-primary btn-lg" onclick="navigateTo('dashboard')" style="width:100%;">Open Dashboard</button>
      </div>
    </div>
  </div>
</div>

<!-- ============================================
     DASHBOARD VIEW
     ============================================ -->
<div class="dashboard-view" id="dashboardView">
  <div class="dash-overlay" id="dashOverlay" onclick="closeSidebar()"></div>

  <!-- Sidebar -->
  <aside class="dash-sidebar" id="dashSidebar">
    <div class="dash-sidebar-logo">
      <div class="nav-logo-icon" style="width:28px;height:28px;font-size:0.9rem;">L</div>
      Lucid
    </div>
    <nav class="dash-nav">
      <button class="dash-nav-item active" data-panel="enhance" onclick="switchPanel(this, 'enhance')">
        <span class="nav-icon">&#9889;</span> Try Lucid
      </button>
      <button class="dash-nav-item" data-panel="analytics" onclick="switchPanel(this, 'analytics')">
        <span class="nav-icon">&#128200;</span> Analytics
      </button>
      <button class="dash-nav-item" data-panel="history" onclick="switchPanel(this, 'history')">
        <span class="nav-icon">&#128214;</span> History
      </button>
      <button class="dash-nav-item" data-panel="settings" onclick="switchPanel(this, 'settings')">
        <span class="nav-icon">&#9881;</span> Settings
      </button>
      <div class="dash-nav-divider"></div>
      <button class="dash-nav-item" onclick="showToast('Upgrade to Team plan to unlock team features.', 'info')">
        <span class="nav-icon">&#128101;</span> Team
        <span class="lock-badge">Pro</span>
      </button>
    </nav>
    <div class="dash-sidebar-footer">
      <button class="dash-upgrade-btn" onclick="showToast('Upgrade flow coming soon!', 'info')">Upgrade to Pro</button>
    </div>
    <div class="dash-sidebar-user" onclick="switchPanel(document.querySelector('[data-panel=settings]'), 'settings')">
      <div class="dash-user-avatar" id="dashUserAvatar">JS</div>
      <div>
        <div class="dash-user-name" id="dashUserName">Jane Smith</div>
        <div class="dash-user-plan">Free Plan</div>
      </div>
    </div>
  </aside>

  <!-- Main -->
  <div class="dash-main">
    <header class="dash-header">
      <div style="display:flex;align-items:center;gap:12px;">
        <button class="dash-mobile-toggle" onclick="toggleSidebar()" aria-label="Toggle sidebar">&#9776;</button>
        <h1 class="dash-header-title" id="dashHeaderTitle">Try Lucid</h1>
      </div>
      <div class="dash-header-actions">
        <button class="btn btn-ghost btn-sm" onclick="handleLogout()">Log Out</button>
      </div>
    </header>

    <div class="dash-content">

      <!-- ====== ENHANCE PANEL ====== -->
      <div class="dash-panel active" id="panelEnhance">
        <div class="enhance-container">
          <div style="margin-bottom:24px;">
            <h2 style="font-size:1.3rem;font-weight:700;margin-bottom:6px;">Enhance a Prompt</h2>
            <p style="font-size:0.9rem;color:var(--text-secondary);">Type a rough idea below. Lucid will translate your intent into an optimized, structured prompt.</p>
          </div>

          <div class="enhance-input-area">
            <textarea class="enhance-textarea" id="enhanceInput" placeholder="e.g. help me write a cold email to a VP of sales about our new analytics product">help me write a cold email to a VP of sales about our new analytics product</textarea>
            <div class="enhance-controls">
              <div class="enhance-model-select">
                <button class="model-chip active" data-model="gpt" onclick="selectModel(this)">ChatGPT</button>
                <button class="model-chip" data-model="claude" onclick="selectModel(this)">Claude</button>
                <button class="model-chip" data-model="gemini" onclick="selectModel(this)">Gemini</button>
              </div>
              <button class="btn btn-primary" id="enhanceBtn" onclick="handleEnhance()">
                <span>Enhance with Lucid</span>
                <div class="spinner" style="display:none;"></div>
              </button>
            </div>
          </div>

          <div class="processing-indicator" id="processingIndicator">
            <div class="processing-dots"><span></span><span></span><span></span></div>
            <div class="processing-text">Analyzing intent and optimizing for <span id="processingModel">Claude</span>...</div>
          </div>

          <div class="enhance-result" id="enhanceResult">
            <div class="enhance-result-header">
              <span class="enhance-result-label">Enhanced Prompt</span>
              <div style="display:flex;gap:8px;align-items:center;">
                <span class="demo-badge model" id="resultModelBadge">Claude</span>
                <span class="demo-badge" id="resultPersonalization">Professional tone</span>
                <span class="demo-time" id="resultTime">Enhanced in 340ms</span>
              </div>
            </div>
            <div class="enhance-result-body" id="enhanceResultBody"></div>
            <div class="enhance-result-footer">
              <div class="enhance-feedback">
                <button class="feedback-btn" onclick="giveFeedback(this, 'up')">&#128077; Helpful</button>
                <button class="feedback-btn" onclick="giveFeedback(this, 'down')">&#128078; Not quite</button>
              </div>
              <div class="enhance-actions">
                <button class="btn btn-secondary btn-sm" onclick="copyEnhancedPrompt()">Copy to Clipboard</button>
                <button class="btn btn-primary btn-sm" onclick="showToast('Opening in your AI tool...', 'info')">Open in Claude</button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- ====== ANALYTICS PANEL ====== -->
      <div class="dash-panel" id="panelAnalytics">
        <div style="margin-bottom:24px;">
          <h2 style="font-size:1.3rem;font-weight:700;margin-bottom:6px;">Analytics</h2>
          <p style="font-size:0.9rem;color:var(--text-secondary);">Your enhancement activity and AI usage insights.</p>
        </div>
        <div id="analyticsContent">
          <div style="text-align:center;padding:48px 0;color:var(--text-tertiary);">
            <div class="spinner" style="display:inline-block;width:24px;height:24px;border:2px solid var(--border);border-top-color:var(--primary);border-radius:50%;animation:spin 0.8s linear infinite;margin-bottom:12px;"></div>
            <div>Loading analytics...</div>
          </div>
        </div>
      </div>

      <!-- ====== HISTORY PANEL ====== -->
      <div class="dash-panel" id="panelHistory">
        <div style="margin-bottom:24px;">
          <h2 style="font-size:1.3rem;font-weight:700;margin-bottom:6px;">Enhancement History</h2>
          <p style="font-size:0.9rem;color:var(--text-secondary);">Your recent prompt enhancements. Click to expand details.</p>
        </div>
        <div class="history-list" id="historyList"></div>
      </div>

      <!-- ====== SETTINGS PANEL ====== -->
      <div class="dash-panel" id="panelSettings">
        <div style="margin-bottom:24px;">
          <h2 style="font-size:1.3rem;font-weight:700;margin-bottom:6px;">Settings</h2>
          <p style="font-size:0.9rem;color:var(--text-secondary);">Manage your profile, personalization, and connected models.</p>
        </div>

        <div class="settings-section">
          <h3 class="settings-section-title">Profile</h3>
          <div class="settings-row">
            <div class="settings-row-label">
              <div class="label">Full Name</div>
            </div>
            <div class="settings-row-control">
              <input type="text" class="form-input" id="settingsName" value="Jane Smith">
            </div>
          </div>
          <div class="settings-row">
            <div class="settings-row-label">
              <div class="label">Email</div>
            </div>
            <div class="settings-row-control">
              <input type="email" class="form-input" id="settingsEmail" value="jane@company.com" disabled style="opacity:0.6;">
            </div>
          </div>
        </div>

        <div class="settings-section">
          <h3 class="settings-section-title">Personalization</h3>
          <div class="settings-row">
            <div class="settings-row-label">
              <div class="label">Default Tone</div>
              <div class="hint">Applied to all enhancements</div>
            </div>
            <div class="settings-row-control">
              <select class="form-select" id="settingsTone">
                <option>Professional</option>
                <option>Casual</option>
                <option>Technical</option>
                <option>Creative</option>
              </select>
            </div>
          </div>
          <div class="settings-row">
            <div class="settings-row-label">
              <div class="label">Output Length</div>
              <div class="hint">Preferred response length</div>
            </div>
            <div class="settings-row-control">
              <select class="form-select" id="settingsLength">
                <option>Concise</option>
                <option>Standard</option>
                <option>Detailed</option>
              </select>
            </div>
          </div>
          <div class="settings-row">
            <div class="settings-row-label">
              <div class="label">Industry</div>
              <div class="hint">Helps with domain-specific context</div>
            </div>
            <div class="settings-row-control">
              <select class="form-select" id="settingsIndustry">
                <option>Technology</option>
                <option>Marketing</option>
                <option>Finance</option>
                <option>Healthcare</option>
                <option>Education</option>
                <option>Legal</option>
                <option>Other</option>
              </select>
            </div>
          </div>
          <div class="settings-row">
            <div class="settings-row-label">
              <div class="label">Custom Instructions</div>
              <div class="hint">Always include with your enhancements</div>
            </div>
            <div class="settings-row-control">
              <textarea class="form-input" rows="3" placeholder="e.g. Always format code examples in TypeScript. Avoid marketing jargon."></textarea>
            </div>
          </div>
        </div>

        <div class="settings-section">
          <h3 class="settings-section-title">Connected Models</h3>
          <div class="settings-row">
            <div class="settings-row-label">
              <div class="label">Active Models</div>
              <div class="hint">Enable enhancement for these platforms</div>
            </div>
            <div class="settings-row-control" style="display:flex;flex-direction:column;gap:12px;">
              <label class="checkbox-group"><input type="checkbox" checked> ChatGPT</label>
              <label class="checkbox-group"><input type="checkbox" checked> Claude</label>
              <label class="checkbox-group"><input type="checkbox" checked> Gemini</label>
            </div>
          </div>
        </div>

        <div class="settings-section">
          <h3 class="settings-section-title">Keyboard Shortcut</h3>
          <div class="settings-row">
            <div class="settings-row-label">
              <div class="label">Quick Enhance</div>
              <div class="hint">Trigger Lucid from anywhere</div>
            </div>
            <div class="settings-row-control">
              <span class="kbd">Cmd + Shift + L</span>
            </div>
          </div>
        </div>

        <div class="settings-section">
          <div class="danger-zone">
            <div class="danger-zone-title">Danger Zone</div>
            <p class="danger-zone-desc">Permanently delete your account and all associated data. This action cannot be undone.</p>
            <button class="btn-danger" onclick="showToast('Account deletion requires email confirmation. Check your inbox.', 'error')">Delete Account</button>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>

<script>
/* ============================================
   API CONFIGURATION
   ============================================ */
const API_URL = window.location.hostname === 'localhost' ? 'http://localhost:3001' : 'https://lucid-api-production.up.railway.app';

/* ============================================
   APPLICATION STATE
   ============================================ */
const state = {
  currentView: 'landing',
  isAnnual: false,
  onboardingStep: 1,
  selectedModel: 'gpt',
  onboarding: {
    role: null,
    tool: null,
    tone: null
  },
  user: null,
  token: null,
  currentEnhancementId: null,
  enhancementHistory: JSON.parse(localStorage.getItem('lucid_history') || '[]')
};

/* ============================================
   API HELPERS
   ============================================ */
async function apiRequest(path, options = {}) {
  const headers = { 'Content-Type': 'application/json', ...options.headers };
  if (state.token) {
    headers['Authorization'] = `Bearer ${state.token}`;
  }
  const res = await fetch(`${API_URL}${path}`, { ...options, headers });
  const data = await res.json().catch(() => ({}));
  if (res.status === 401) {
    handleLogout();
    showToast('Session expired. Please log in again.', 'error');
    throw new Error('Unauthorized');
  }
  if (!res.ok) {
    throw new Error(data.error || data.message || `Request failed (${res.status})`);
  }
  return data;
}

/* ============================================
   THEME TOGGLE
   ============================================ */
function toggleTheme() {
  const html = document.documentElement;
  const current = html.getAttribute('data-theme');
  const next = current === 'dark' ? 'light' : 'dark';
  html.setAttribute('data-theme', next);
  localStorage.setItem('lucid_theme', next);
}

// Restore saved theme (default: light)
(function() {
  const saved = localStorage.getItem('lucid_theme') || 'light';
  document.documentElement.setAttribute('data-theme', saved);
})();

/* ============================================
   NAVIGATION
   ============================================ */
function navigateTo(view) {
  const allViews = ['landing', 'signup', 'login', 'onboarding', 'dashboard'];
  const viewMap = {
    landing: 'landingView',
    signup: 'signupView',
    login: 'loginView',
    onboarding: 'onboardingView',
    dashboard: 'dashboardView'
  };

  allViews.forEach(v => {
    const el = document.getElementById(viewMap[v]);
    if (el) {
      el.classList.remove('active');
      if (v === 'dashboard') el.style.display = 'none';
    }
  });

  const target = document.getElementById(viewMap[view]);
  if (target) {
    target.classList.add('active');
    if (view === 'dashboard') {
      target.style.display = 'flex';
      updateDashboardUser();
    }
  }

  state.currentView = view;
  window.scrollTo(0, 0);
}

function scrollToSection(id) {
  const el = document.getElementById(id);
  if (el) el.scrollIntoView({ behavior: 'smooth' });
}

/* ============================================
   NAV SCROLL EFFECT
   ============================================ */
window.addEventListener('scroll', () => {
  const nav = document.getElementById('mainNav');
  if (nav) {
    nav.classList.toggle('scrolled', window.scrollY > 40);
  }
});

/* ============================================
   MOBILE MENU
   ============================================ */
function toggleMobileMenu() {
  const links = document.getElementById('navLinks');
  if (links.style.display === 'flex') {
    links.style.display = 'none';
  } else {
    links.style.display = 'flex';
    links.style.position = 'absolute';
    links.style.top = '72px';
    links.style.left = '0';
    links.style.right = '0';
    links.style.background = 'var(--bg-secondary)';
    links.style.flexDirection = 'column';
    links.style.padding = '16px';
    links.style.borderBottom = '1px solid var(--border)';
    links.style.zIndex = '999';
  }
}

/* ============================================
   TOAST SYSTEM
   ============================================ */
function showToast(message, type = 'info') {
  const container = document.getElementById('toastContainer');
  const toast = document.createElement('div');
  toast.className = `toast ${type}`;
  const icon = type === 'success' ? '&#10003;' : type === 'error' ? '&#10007;' : '&#8505;';
  toast.innerHTML = `<span>${icon}</span> ${message}`;
  container.appendChild(toast);
  setTimeout(() => {
    if (toast.parentNode) toast.remove();
  }, 3000);
}

/* ============================================
   PRICING TOGGLE
   ============================================ */
function togglePricing() {
  state.isAnnual = !state.isAnnual;
  const toggle = document.getElementById('pricingToggle');
  const monthlyLabel = document.getElementById('monthlyLabel');
  const annualLabel = document.getElementById('annualLabel');

  toggle.classList.toggle('active', state.isAnnual);
  monthlyLabel.classList.toggle('active', !state.isAnnual);
  annualLabel.classList.toggle('active', state.isAnnual);

  document.querySelectorAll('.price-amount[data-monthly]').forEach(el => {
    const monthly = el.dataset.monthly;
    const annual = el.dataset.annual;
    el.innerHTML = state.isAnnual
      ? `$${annual}<span>/mo</span>`
      : `$${monthly}<span>/mo</span>`;
  });

  document.querySelectorAll('.price-period-monthly').forEach(el => {
    el.style.display = state.isAnnual ? 'none' : 'block';
  });
  document.querySelectorAll('.price-period-annual').forEach(el => {
    el.style.display = state.isAnnual ? 'block' : 'none';
  });
}

/* ============================================
   FAQ ACCORDION
   ============================================ */
function toggleFaq(btn) {
  const item = btn.parentElement;
  const wasOpen = item.classList.contains('open');
  document.querySelectorAll('.faq-item').forEach(i => i.classList.remove('open'));
  if (!wasOpen) item.classList.add('open');
}

/* ============================================
   AUTH — SIGNUP
   ============================================ */
async function handleSignup() {
  const name = document.getElementById('signupName').value.trim();
  const email = document.getElementById('signupEmail').value.trim();
  const password = document.getElementById('signupPassword').value;
  const terms = document.getElementById('signupTerms').checked;
  const errorEl = document.getElementById('signupError');
  const btn = document.getElementById('signupBtn');

  if (!name || !email || !password || !terms) {
    errorEl.style.display = 'block';
    errorEl.textContent = !terms ? 'You must agree to the terms.' : 'Please fill in all fields.';
    return;
  }
  if (password.length < 8) {
    errorEl.style.display = 'block';
    errorEl.textContent = 'Password must be at least 8 characters.';
    return;
  }

  errorEl.style.display = 'none';
  btn.classList.add('btn-loading');
  btn.querySelector('.spinner').style.display = 'inline-block';
  btn.querySelector('span').style.display = 'none';

  try {
    const data = await apiRequest('/auth/signup', {
      method: 'POST',
      body: JSON.stringify({ email, password, name })
    });
    state.token = data.token;
    state.user = data.user;
    localStorage.setItem('lucid_token', data.token);
    localStorage.setItem('lucid_session', JSON.stringify(data.user));
    startOnboarding();
  } catch (err) {
    errorEl.style.display = 'block';
    errorEl.textContent = err.message || 'Signup failed. Please try again.';
  } finally {
    btn.classList.remove('btn-loading');
    btn.querySelector('.spinner').style.display = 'none';
    btn.querySelector('span').style.display = 'inline';
  }
}

function fakeGoogleSignup() {
  showToast('Google sign-in coming soon!', 'info');
}

/* ============================================
   AUTH — LOGIN
   ============================================ */
async function handleLogin() {
  const email = document.getElementById('loginEmail').value.trim();
  const password = document.getElementById('loginPassword').value;
  const errorEl = document.getElementById('loginError');
  const btn = document.getElementById('loginBtn');

  if (!email || !password) {
    errorEl.style.display = 'block';
    errorEl.textContent = 'Please fill in all fields.';
    return;
  }

  errorEl.style.display = 'none';
  btn.classList.add('btn-loading');
  btn.querySelector('.spinner').style.display = 'inline-block';
  btn.querySelector('span').style.display = 'none';

  try {
    const data = await apiRequest('/auth/login', {
      method: 'POST',
      body: JSON.stringify({ email, password })
    });
    state.token = data.token;
    state.user = data.user;
    localStorage.setItem('lucid_token', data.token);
    localStorage.setItem('lucid_session', JSON.stringify(data.user));
    showToast('Welcome back!', 'success');
    navigateTo('dashboard');
  } catch (err) {
    errorEl.style.display = 'block';
    errorEl.textContent = err.message || 'Login failed. Please try again.';
  } finally {
    btn.classList.remove('btn-loading');
    btn.querySelector('.spinner').style.display = 'none';
    btn.querySelector('span').style.display = 'inline';
  }
}

function fakeGoogleLogin() {
  showToast('Google sign-in coming soon!', 'info');
}

function handleLogout() {
  localStorage.removeItem('lucid_session');
  localStorage.removeItem('lucid_token');
  state.user = null;
  state.token = null;
  state.currentEnhancementId = null;
  showToast('Logged out successfully.', 'info');
  navigateTo('landing');
}

/* ============================================
   ONBOARDING
   ============================================ */
function startOnboarding() {
  state.onboardingStep = 1;
  updateOnboardingUI();
  navigateTo('onboarding');
}

function updateOnboardingUI() {
  for (let i = 1; i <= 4; i++) {
    const step = document.getElementById(`obStep${i}`);
    const bar = document.getElementById(`obBar${i}`);
    step.classList.toggle('active', i === state.onboardingStep);
    bar.classList.remove('active', 'done');
    if (i < state.onboardingStep) bar.classList.add('done');
    if (i === state.onboardingStep) bar.classList.add('active');
  }
}

function selectOption(btn, category) {
  const parent = btn.parentElement;
  parent.querySelectorAll('.onboarding-option').forEach(o => o.classList.remove('selected'));
  btn.classList.add('selected');
  state.onboarding[category] = btn.textContent.trim();
}

function nextOnboardingStep() {
  if (state.onboardingStep < 4) {
    state.onboardingStep++;
    if (state.onboardingStep === 4) {
      const role = state.onboarding.role || 'professional';
      const tool = state.onboarding.tool || 'AI tools';
      const tone = state.onboarding.tone || 'your preferred';
      document.getElementById('welcomeMsg').textContent =
        `Great choice! As a ${role.toLowerCase()} using ${tool} with a ${tone.toLowerCase()} style, Lucid is now calibrated for you. Let's make your first enhancement.`;
    }
    updateOnboardingUI();
  }
}

/* ============================================
   DASHBOARD
   ============================================ */
function updateDashboardUser() {
  if (state.user) {
    const initials = state.user.name.split(' ').map(n => n[0]).join('').toUpperCase();
    document.getElementById('dashUserAvatar').textContent = initials;
    document.getElementById('dashUserName').textContent = state.user.name;
    document.getElementById('settingsName').value = state.user.name;
    document.getElementById('settingsEmail').value = state.user.email;

    if (state.onboarding.tone) {
      document.getElementById('settingsTone').value = state.onboarding.tone;
    }
  }
}

function switchPanel(btn, panelName) {
  document.querySelectorAll('.dash-nav-item').forEach(n => n.classList.remove('active'));
  if (btn) btn.classList.add('active');
  document.querySelectorAll('.dash-panel').forEach(p => p.classList.remove('active'));
  const panel = document.getElementById(`panel${panelName.charAt(0).toUpperCase() + panelName.slice(1)}`);
  if (panel) panel.classList.add('active');

  const titles = { enhance: 'Try Lucid', analytics: 'Analytics', history: 'Enhancement History', settings: 'Settings' };
  document.getElementById('dashHeaderTitle').textContent = titles[panelName] || panelName;

  if (panelName === 'analytics') {
    loadAnalytics();
  }

  closeSidebar();
}

function toggleSidebar() {
  document.getElementById('dashSidebar').classList.toggle('open');
  document.getElementById('dashOverlay').classList.toggle('open');
}

function closeSidebar() {
  document.getElementById('dashSidebar').classList.remove('open');
  document.getElementById('dashOverlay').classList.remove('open');
}

/* ============================================
   MODEL SELECT
   ============================================ */
function selectModel(btn) {
  document.querySelectorAll('.model-chip').forEach(c => c.classList.remove('active'));
  btn.classList.add('active');
  state.selectedModel = btn.dataset.model;
}

/* ============================================
   ENHANCEMENT ENGINE
   ============================================ */
const enhancementTemplates = {
  default: {
    sections: [
      { tag: 'ROLE', content: 'You are a highly skilled professional assistant with expertise in the relevant domain.' },
      { tag: 'CONTEXT', content: 'The user needs help with a task that requires clear, structured output. Consider the user\'s goals and constraints.' },
      { tag: 'TASK', content: '' },
      { tag: 'FORMAT', content: 'Provide a clear, well-organized response. Use headers and bullet points where appropriate.' },
      { tag: 'CONSTRAINTS', content: 'Be concise but thorough. Use a professional tone. Avoid unnecessary filler.' }
    ]
  },
  email: {
    sections: [
      { tag: 'ROLE', content: 'You are an experienced B2B sales consultant who specializes in SaaS analytics platforms and enterprise sales outreach.' },
      { tag: 'CONTEXT', content: 'I\'m reaching out to a VP of Sales at a mid-market SaaS company about our new analytics product that provides real-time pipeline insights and predictive forecasting.' },
      { tag: 'TASK', content: 'Write a compelling cold email that opens a conversation, demonstrates value without being pushy, and includes a specific, low-friction call to action.' },
      { tag: 'FORMAT', content: 'Under 150 words. Compelling subject line. 2-3 short paragraphs. Clear CTA. Professional signature.' },
      { tag: 'CONSTRAINTS', content: 'Professional but warm tone. No jargon or buzzwords. Lead with a data-driven hook. Personalize the opening line. No "I hope this finds you well."' }
    ]
  },
  code: {
    sections: [
      { tag: 'ROLE', content: 'You are a senior software engineer with deep expertise in full-stack development, clean architecture, and modern best practices.' },
      { tag: 'CONTEXT', content: 'The developer needs technical assistance with code implementation. Consider performance, maintainability, and edge cases.' },
      { tag: 'TASK', content: '' },
      { tag: 'FORMAT', content: 'Provide working code with inline comments. Include error handling. Show usage examples.' },
      { tag: 'CONSTRAINTS', content: 'Follow SOLID principles. Prefer readability over cleverness. Include TypeScript types where applicable. No deprecated APIs.' }
    ]
  },
  content: {
    sections: [
      { tag: 'ROLE', content: 'You are a seasoned content strategist and copywriter with expertise in digital marketing and audience engagement.' },
      { tag: 'CONTEXT', content: 'Creating content that needs to engage a specific audience, drive action, and align with brand voice.' },
      { tag: 'TASK', content: '' },
      { tag: 'FORMAT', content: 'Use compelling headlines, scannable structure, and clear CTAs. Optimize for readability.' },
      { tag: 'CONSTRAINTS', content: 'Match the brand tone. Avoid cliches. Include specific examples and data points where possible. Keep paragraphs under 3 sentences.' }
    ]
  },
  analysis: {
    sections: [
      { tag: 'ROLE', content: 'You are a senior business analyst with expertise in data-driven decision making and strategic planning.' },
      { tag: 'CONTEXT', content: 'The user needs a thorough analysis that considers multiple perspectives, trade-offs, and actionable recommendations.' },
      { tag: 'TASK', content: '' },
      { tag: 'FORMAT', content: 'Executive summary first, then detailed analysis with sections. Include pros/cons or comparison table. End with recommendations.' },
      { tag: 'CONSTRAINTS', content: 'Be objective. Support claims with reasoning. Acknowledge uncertainty. Prioritize actionability over comprehensiveness.' }
    ]
  }
};

function detectCategory(input) {
  const lower = input.toLowerCase();
  if (/email|outreach|cold|message|dm|reach out/i.test(lower)) return 'email';
  if (/code|function|api|build|implement|debug|script|component|database/i.test(lower)) return 'code';
  if (/write|blog|article|content|copy|headline|post|tweet|caption/i.test(lower)) return 'content';
  if (/analyze|compare|evaluate|assess|review|strategy|plan|research/i.test(lower)) return 'analysis';
  return 'default';
}

function generateEnhancement(input) {
  const category = detectCategory(input);
  const template = JSON.parse(JSON.stringify(enhancementTemplates[category]));
  const taskSection = template.sections.find(s => s.tag === 'TASK');
  if (taskSection && !taskSection.content) {
    taskSection.content = input.charAt(0).toUpperCase() + input.slice(1) + (input.endsWith('.') ? '' : '.');
  }

  const modelNames = { gpt: 'ChatGPT', claude: 'Claude', gemini: 'Gemini' };
  return {
    sections: template.sections,
    model: modelNames[state.selectedModel] || 'Claude',
    category,
    time: Math.floor(Math.random() * 200) + 250
  };
}

async function handleEnhance() {
  const input = document.getElementById('enhanceInput').value.trim();
  if (!input) {
    showToast('Type a prompt to enhance.', 'error');
    return;
  }

  const btn = document.getElementById('enhanceBtn');
  const processing = document.getElementById('processingIndicator');
  const result = document.getElementById('enhanceResult');

  btn.disabled = true;
  btn.querySelector('.spinner').style.display = 'inline-block';
  btn.querySelector('span').style.display = 'none';
  result.classList.remove('visible');

  const modelNames = { gpt: 'ChatGPT', claude: 'Claude', gemini: 'Gemini' };
  const modelApiMap = { gpt: 'chatgpt', claude: 'claude', gemini: 'gemini' };
  document.getElementById('processingModel').textContent = modelNames[state.selectedModel] || 'Claude';
  processing.classList.add('visible');

  try {
    const data = await apiRequest('/v1/enhance', {
      method: 'POST',
      body: JSON.stringify({
        intent: input,
        mode: 'enhance',
        targetModel: modelApiMap[state.selectedModel] || 'claude'
      })
    });

    processing.classList.remove('visible');
    btn.disabled = false;
    btn.querySelector('.spinner').style.display = 'none';
    btn.querySelector('span').style.display = 'inline';

    state.currentEnhancementId = data.enhancementId || data.id || null;

    // Track in session history
    state.enhancementHistory.unshift({
      intent: input,
      enhanced: data.enhanced,
      mode: 'enhance',
      targetModel: modelApiMap[state.selectedModel] || 'claude',
      durationMs: data.durationMs || 0,
      enhancementId: state.currentEnhancementId,
      timestamp: new Date().toISOString()
    });
    localStorage.setItem('lucid_history', JSON.stringify(state.enhancementHistory));
    renderHistory();

    const body = document.getElementById('enhanceResultBody');
    body.innerHTML = '';

    // Display the enhanced text from the API
    body.style.opacity = '0';
    body.innerHTML = `<span class="section-content">${data.enhanced.replace(/\n/g, '<br>')}</span>`;
    result.classList.add('visible');

    requestAnimationFrame(() => {
      body.style.transition = 'opacity 0.5s ease';
      body.style.opacity = '1';
    });

    document.getElementById('resultModelBadge').textContent = modelNames[state.selectedModel] || 'Claude';
    const tone = state.onboarding.tone || 'Professional';
    document.getElementById('resultPersonalization').textContent = `${tone} tone`;
    document.getElementById('resultTime').textContent = `Enhanced in ${data.durationMs || 0}ms`;

    // Reset feedback
    document.querySelectorAll('.feedback-btn').forEach(b => b.classList.remove('selected'));

  } catch (err) {
    if (err.message === 'Unauthorized') return; // Already handled by apiRequest

    // Fallback to local enhancement templates when API is unreachable
    console.warn('API unavailable, using local fallback:', err.message);
    const enhancement = generateEnhancement(input);

    processing.classList.remove('visible');
    btn.disabled = false;
    btn.querySelector('.spinner').style.display = 'none';
    btn.querySelector('span').style.display = 'inline';

    state.currentEnhancementId = null;

    const body = document.getElementById('enhanceResultBody');
    body.innerHTML = '';

    let fullHTML = '';
    enhancement.sections.forEach(s => {
      fullHTML += `<span class="section-tag">[${s.tag}]</span> <span class="section-content">${s.content}</span><br><br>`;
    });

    body.style.opacity = '0';
    body.innerHTML = fullHTML;
    result.classList.add('visible');

    requestAnimationFrame(() => {
      body.style.transition = 'opacity 0.5s ease';
      body.style.opacity = '1';
    });

    document.getElementById('resultModelBadge').textContent = enhancement.model;
    const tone = state.onboarding.tone || 'Professional';
    document.getElementById('resultPersonalization').textContent = `${tone} tone`;
    document.getElementById('resultTime').textContent = `Enhanced in ${enhancement.time}ms`;

    document.querySelectorAll('.feedback-btn').forEach(b => b.classList.remove('selected'));

    showToast(err.message || 'Enhancement failed. Using local fallback.', 'error');
  }
}

async function giveFeedback(btn, type) {
  document.querySelectorAll('.feedback-btn').forEach(b => b.classList.remove('selected'));
  btn.classList.add('selected');

  if (state.currentEnhancementId) {
    try {
      await apiRequest('/v1/feedback', {
        method: 'POST',
        body: JSON.stringify({
          enhancementId: state.currentEnhancementId,
          signal: type === 'up' ? 'thumbs_up' : 'thumbs_down'
        })
      });
    } catch (err) {
      console.warn('Feedback submission failed:', err.message);
    }
  }

  showToast(type === 'up' ? 'Thanks! This helps Lucid learn your preferences.' : 'Noted. Lucid will adjust future enhancements.', 'success');
}

function copyEnhancedPrompt() {
  const body = document.getElementById('enhanceResultBody');
  const text = body.innerText;
  navigator.clipboard.writeText(text).then(() => {
    showToast('Copied to clipboard!', 'success');
  }).catch(() => {
    showToast('Copy failed. Try selecting manually.', 'error');
  });
}

/* ============================================
   ANALYTICS
   ============================================ */
function formatTimeSaved(minutes) {
  if (minutes >= 60) {
    const hours = (minutes / 60).toFixed(1);
    return `~${hours}h`;
  }
  return `~${minutes}min`;
}

async function loadAnalytics() {
  const container = document.getElementById('analyticsContent');
  container.innerHTML = `
    <div style="text-align:center;padding:48px 0;color:var(--text-tertiary);">
      <div class="spinner" style="display:inline-block;width:24px;height:24px;border:2px solid var(--border);border-top-color:var(--primary);border-radius:50%;animation:spin 0.8s linear infinite;margin-bottom:12px;"></div>
      <div>Loading analytics...</div>
    </div>`;

  try {
    const data = await apiRequest('/v1/analytics');
    renderAnalytics(data);
  } catch (err) {
    if (err.message === 'Unauthorized') return;
    if (err.message.includes('403') || err.message.includes('Pro')) {
      container.innerHTML = `
        <div style="text-align:center;padding:48px 24px;">
          <div style="font-size:2.5rem;margin-bottom:16px;">&#128274;</div>
          <h3 style="font-size:1.1rem;font-weight:600;margin-bottom:8px;">Upgrade to Pro to unlock Analytics</h3>
          <p style="font-size:0.9rem;color:var(--text-secondary);margin-bottom:20px;max-width:400px;margin-left:auto;margin-right:auto;">
            Get detailed insights into your enhancement activity, model usage, time saved, and quality scores.
          </p>
          <button class="btn btn-primary" onclick="navigateTo('landing');setTimeout(()=>{document.getElementById('pricing').scrollIntoView({behavior:'smooth'})},300);">
            View Pro Plans
          </button>
        </div>`;
    } else {
      container.innerHTML = `
        <div style="text-align:center;padding:48px 24px;color:var(--text-tertiary);">
          <div style="font-size:2rem;margin-bottom:12px;">&#9888;&#65039;</div>
          <p style="font-size:0.9rem;">Could not load analytics. <a href="#" onclick="event.preventDefault();loadAnalytics();">Try again</a></p>
        </div>`;
    }
  }
}

function renderAnalytics(data) {
  const container = document.getElementById('analyticsContent');
  const timeSaved = formatTimeSaved(data.estimatedTimeSavedMinutes || 0);
  const avgPerEnhancement = data.totalEnhancements > 0
    ? ((data.estimatedTimeSavedMinutes || 0) / data.totalEnhancements).toFixed(1)
    : '0';
  const qualityScore = (data.averageQualityScore || 0).toFixed(1);

  // Build bar chart from dailyActivity (last 7 days)
  const dayNames = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
  const activity = data.dailyActivity || [];
  const maxCount = Math.max(1, ...activity.map(d => d.count));
  let barChartHTML = '';
  if (activity.length > 0) {
    barChartHTML = activity.map(d => {
      const date = new Date(d.date + 'T00:00:00');
      const dayLabel = dayNames[date.getDay()];
      const heightPct = Math.max(5, (d.count / maxCount) * 100);
      return `<div class="bar-chart-bar" style="height:${heightPct}%;"><span class="bar-value">${d.count}</span><span class="bar-label">${dayLabel}</span></div>`;
    }).join('');
  } else {
    barChartHTML = '<div style="text-align:center;color:var(--text-tertiary);padding:24px;font-size:0.85rem;">No activity data yet</div>';
  }

  // Build pie chart from modelDistribution
  const modelDist = data.modelDistribution || {};
  const modelColors = { chatgpt: '#10A37F', claude: '#D4A574', gemini: '#4285F4' };
  const modelLabels = { chatgpt: 'ChatGPT', claude: 'Claude', gemini: 'Gemini' };
  const totalModels = Object.values(modelDist).reduce((a, b) => a + b, 0) || 1;
  let conicParts = [];
  let legendParts = [];
  let cumPct = 0;
  for (const [model, count] of Object.entries(modelDist)) {
    const pct = Math.round((count / totalModels) * 100);
    const color = modelColors[model] || '#64748B';
    const label = modelLabels[model] || model;
    conicParts.push(`${color} ${cumPct}% ${cumPct + pct}%`);
    legendParts.push(`<div class="pie-legend-item"><span class="pie-legend-dot" style="background:${color};"></span> ${label} ${pct}%</div>`);
    cumPct += pct;
  }
  const conicGradient = conicParts.length > 0 ? `conic-gradient(${conicParts.join(', ')})` : 'conic-gradient(var(--bg-tertiary) 0% 100%)';

  // Build mode distribution bars
  const modeDist = data.modeDistribution || {};
  const totalModes = Object.values(modeDist).reduce((a, b) => a + b, 0) || 1;
  const modeBarHTML = ['enhance', 'expand', 'refine', 'simplify'].map(mode => {
    const count = modeDist[mode] || 0;
    const pct = Math.round((count / totalModes) * 100);
    const label = mode.charAt(0).toUpperCase() + mode.slice(1);
    return `<div style="display:flex;align-items:center;gap:10px;">
      <span style="font-size:0.82rem;color:var(--text-secondary);min-width:60px;">${label}</span>
      <div style="flex:1;height:8px;background:var(--bg-tertiary);border-radius:4px;overflow:hidden;"><div style="width:${pct}%;height:100%;background:var(--gradient);border-radius:4px;"></div></div>
      <span style="font-size:0.78rem;color:var(--text-tertiary);">${pct}%</span>
    </div>`;
  }).join('');

  container.innerHTML = `
    <div class="analytics-grid">
      <div class="analytics-card">
        <div class="analytics-card-label">Enhancements This Month</div>
        <div class="analytics-card-value text-gradient">${data.enhancementsThisMonth || 0}</div>
        <div class="analytics-card-sub">${data.totalEnhancements || 0} total enhancements</div>
      </div>
      <div class="analytics-card">
        <div class="analytics-card-label">Time Saved</div>
        <div class="analytics-card-value text-gradient">${timeSaved}</div>
        <div class="analytics-card-sub">~${avgPerEnhancement} min saved per enhancement</div>
      </div>
      <div class="analytics-card">
        <div class="analytics-card-label">Quality Score</div>
        <div class="analytics-card-value text-gradient">${qualityScore}/5.0</div>
        <div class="analytics-card-sub">Based on ${data.totalEnhancements || 0} enhancements</div>
      </div>
      <div class="analytics-card">
        <div class="analytics-card-label">Total Enhancements</div>
        <div class="analytics-card-value text-gradient">${data.totalEnhancements || 0}</div>
        <div class="analytics-card-sub">${data.enhancementsThisMonth || 0} this month</div>
      </div>
    </div>

    <div class="analytics-charts">
      <div class="chart-card">
        <div class="chart-title">Enhancement Activity (Last 7 Days)</div>
        <div class="bar-chart">${barChartHTML}</div>
      </div>
      <div class="chart-card">
        <div class="chart-title">Model Distribution</div>
        <div class="pie-chart-container">
          <div class="pie-chart" style="background: ${conicGradient};"></div>
          <div class="pie-legend">${legendParts.length > 0 ? legendParts.join('') : '<div style="color:var(--text-tertiary);font-size:0.85rem;">No data yet</div>'}</div>
        </div>
        <div style="margin-top:20px;">
          <div class="chart-title">Most Used Modes</div>
          <div style="display:flex;flex-direction:column;gap:8px;">
            ${modeBarHTML}
          </div>
        </div>
      </div>
    </div>`;
}

/* ============================================
   HISTORY DATA
   ============================================ */
function renderHistory() {
  const list = document.getElementById('historyList');
  const items = state.enhancementHistory;
  const modelNames = { chatgpt: 'ChatGPT', claude: 'Claude', gemini: 'Gemini' };

  if (!items || items.length === 0) {
    list.innerHTML = `
      <div style="text-align:center;padding:48px 24px;color:var(--text-tertiary);">
        <div style="font-size:2rem;margin-bottom:12px;">&#128221;</div>
        <p style="font-size:0.95rem;margin-bottom:4px;">No enhancements yet.</p>
        <p style="font-size:0.85rem;">Try enhancing a prompt!</p>
      </div>`;
    return;
  }

  list.innerHTML = items.map(item => {
    const date = new Date(item.timestamp);
    const timeStr = date.toLocaleDateString('en-US', { month: 'short', day: 'numeric' }) + ' at ' + date.toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit' });
    const modeLabel = item.mode ? item.mode.charAt(0).toUpperCase() + item.mode.slice(1) : 'Enhance';
    const model = item.targetModel || 'claude';
    const modelName = modelNames[model] || model;
    const intentPreview = item.intent.length > 80 ? item.intent.slice(0, 80) + '...' : item.intent;
    const enhancedPreview = item.enhanced ? (item.enhanced.length > 200 ? item.enhanced.slice(0, 200) + '...' : item.enhanced) : '';
    const durationLabel = item.durationMs ? `${item.durationMs}ms` : '';
    return `
    <div class="history-item" onclick="this.classList.toggle('expanded')">
      <div class="history-item-header">
        <span class="history-item-mode">${modeLabel}</span>
        <span class="history-item-time">${timeStr}</span>
      </div>
      <div class="history-item-body">
        <span class="history-item-category">${intentPreview}</span>
        <div class="history-item-meta">
          <span class="history-item-model ${model}">${modelName}</span>
          ${durationLabel ? `<span class="history-item-score">${durationLabel}</span>` : ''}
        </div>
      </div>
      <div class="history-item-detail">
        <div class="history-item-detail-inner">${enhancedPreview}</div>
      </div>
    </div>`;
  }).join('');
}

/* ============================================
   INIT
   ============================================ */
async function init() {
  // Check for existing session with token validation
  const token = localStorage.getItem('lucid_token');
  const session = localStorage.getItem('lucid_session');

  if (token && session) {
    try {
      state.user = JSON.parse(session);
      state.token = token;

      // Validate token against the API (bypass apiRequest to avoid 401 toast on startup)
      const res = await fetch(`${API_URL}/auth/me`, {
        headers: { 'Authorization': `Bearer ${token}`, 'Content-Type': 'application/json' }
      });
      if (res.ok) {
        const data = await res.json();
        state.user = data.user || data;
        localStorage.setItem('lucid_session', JSON.stringify(state.user));
        navigateTo('dashboard');
      } else {
        throw new Error('Invalid token');
      }
    } catch (e) {
      // Token invalid or API unreachable — clear session silently
      localStorage.removeItem('lucid_token');
      localStorage.removeItem('lucid_session');
      state.user = null;
      state.token = null;
    }
  } else if (session) {
    // Legacy session without token — clear it
    localStorage.removeItem('lucid_session');
  }

  // Render history
  renderHistory();

  // Handle in-page anchor clicks for landing
  document.querySelectorAll('a[href^="#"]').forEach(link => {
    link.addEventListener('click', (e) => {
      const href = link.getAttribute('href');
      if (href && href.length > 1) {
        const target = document.getElementById(href.substring(1));
        if (target) {
          e.preventDefault();
          target.scrollIntoView({ behavior: 'smooth' });
        }
      }
    });
  });
}

document.addEventListener('DOMContentLoaded', init);
</script>

</body>
</html>
